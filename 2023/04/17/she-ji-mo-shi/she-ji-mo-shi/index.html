<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="JavaScript设计模式, 顶级军师">
    <meta name="description" content="JavaScript设计模式


什么是设计模式
设计原则
分类及详解（23种设计模式）
代码重构
参考图
参考文档



一、什么是设计模式

1、概念


设计模式的定义：在面向对象软件设计过程中针对特定问题的简洁而优雅的解决方案


">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>JavaScript设计模式 | 顶级军师</title>
    <link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="/favicon.ico">
    
    <style>
        body{
            background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
            background-repeat:no-repeat;
            background-size: 100% 100%;
            background-attachment:fixed;
        }
    </style>



    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">顶级军师</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">顶级军师</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/zmf-6" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/zmf-6" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/6.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">JavaScript设计模式</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/js/">
                                <span class="chip bg-color">js</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/js/" class="post-category">
                                js
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-04-17
                </div>
                

                

                

                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="JavaScript设计模式"><a href="#JavaScript设计模式" class="headerlink" title="JavaScript设计模式"></a><b>JavaScript设计模式</b></h1><br/>

<ul>
<li><a href="##%3Cb%3E%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%3C/b%3E">什么是设计模式</a></li>
<li><a href="##%3Cb%3E%E4%BA%8C%E3%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%81%B5%E5%BE%AA%E7%9A%84%E5%8E%9F%E5%88%99%3C/b%3E">设计原则</a></li>
<li><a href="##%3Cb%3E%E4%B8%89%E3%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%88%86%E7%B1%BB%3C/b%3E">分类及详解（23种设计模式）</a></li>
<li><a href="##%3Cb%3E%E5%9B%9B%E3%80%81%E4%BB%A3%E7%A0%81%E9%87%8D%E6%9E%84%3C/b%3E">代码重构</a></li>
<li><a href="##%3Cb%3E%E4%BA%94%E3%80%81%E9%99%84%E5%BD%95%EF%BC%9A%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9B%BE%E7%A4%BA%3C/b%3E">参考图</a></li>
<li><a href="##%3Cb%3E%E5%85%AD%E3%80%81%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%E6%9D%A5%E6%BA%90%3C/b%3E">参考文档</a></li>
</ul>
<br/>

<h2 id="一、什么是设计模式"><a href="#一、什么是设计模式" class="headerlink" title="一、什么是设计模式"></a><b>一、什么是设计模式</b></h2><br/>

<h3 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a><b>1、概念</b></h3><br/>

<blockquote>
<p>设计模式的定义：<b style='color:yellow'>在面向对象软件设计过程中针对特定问题的简洁而优雅的解决方案</b></p>
</blockquote>
<br/>

<p>设计模式是解决某个特定场景下对某种问题的解决方案。因此，当我们遇到合适的场景时，我们可能会条件反射一样自然而然想到符合这种场景的设计模式。</p>
<br/>

<p>比如，当系统中某个接口的结构已经无法满足我们现在的业务需求，但又不能改动这个接口，因为可能原来的系统很多功能都依赖于这个接口，改动接口会牵扯到太多文件。因此应对这种场景，我们可以很快地想到可以用适配器模式来解决这个问题。</p>
<br/>

<p>设计模式代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。</p>
<br/>

<p>设计模式是一套被反复使用的、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了重用代码、让代码更容易被他人理解、保证代码可靠性</p>
<br/>

<h2 id="二、设计模式遵循的原则"><a href="#二、设计模式遵循的原则" class="headerlink" title="二、设计模式遵循的原则"></a><b>二、设计模式遵循的原则</b></h2><br/>

<h3 id="三大设计原则"><a href="#三大设计原则" class="headerlink" title="三大设计原则"></a><b>三大设计原则</b></h3><br/>

<ul>
<li><p><b style='color:yellow'>SRP(Single Responsibility Principle) 单一职责原则</b></p>
<blockquote>
<p>就一个类而言，应仅有一个引起它变化的原因。</p>
</blockquote>
<br/>

<p><b>一个对象&#x2F;方法，只做一件事情。</b></p>
<p>单一职责原则（SRP）的职责被定义为“引起变化的原因”。 如果我们有两个动机去改写一个方法，那么这个方法就具有两个职责。每个职责都是变化的一个轴线，如果一个方法承担了过多的职责，那么在需求的变迁过程中，需要改写这个方法的可能性就越大。</p>
<br/>

<p><b>SRP原则是所有原则中最简单也是最难正确运用的原则之一。</b></p>
<p><b style='color:red'>要明确的是，并不是所有的职责都应该一一分离。</b></p>
<ul>
<li><p><span style='color:red'>一方面，如果随着需求的变化，有两个职责总是同时变化，那就不必分离他们。</span>比如在ajax请求的时候，创建xhr对象和发送xhr请求几乎总是在一起的，那么创建xhr对象的职责和发送xhr请求的职责就没有必要分开。</p>
</li>
<li><p><span style='color:red'>另一方面，职责的变化轴线仅当它们确定会发生变化时才具有意义，</span>即使两个职责已经被耦合在一起，但它们还没有发生改变的征兆，那么也许没有必要主动分离它们，在代码需要重构的时候再进行分离也不迟。</p>
</li>
</ul>
<br/>

<p><b>SRP原则的优缺点</b></p>
<p>SRP原则的优点是降低了单个类或者对象的复杂度，按照职责把对象分解成更小的粒度，这有助于代码的复用，也有利于进行单元测试。当一个职责需要变更的时候，不会影响到其他的职责。</p>
<br/>
</li>
<li><p><b style='color:yellow'>LKP(Least Knowledge Principle) 最少知识原则</b></p>
<blockquote>
<p>一个软件实体应当尽可能少地与其他实体发生相互作用。</p>
</blockquote>
<br/>

<p><b style='color:red'>注意：</b>这里的软件实体是一个广义的概念，不仅包括对象，还包括系统、类、模块、函数、变量等。</p>
<br/>

<p><b>减少对象之间的联系</b></p>
<p>最少知识原则要求我们在设计程序时，应当尽量减少对象之间的交互。如果两个对象之间不必彼此直接通信，那么这两个对象就不要发生直接的相互联系。</p>
<br/>

<p><b>迪米特法则（Law of Demeter，LoD）</b></p>
<p>最少知识原则也叫迪米特法则（Law of Demeter，LoD），“迪米特”这个名字源自1987年美国东北大学一个名为“Demeter”的研究项目。<br>在实际开发中，是否选择让代码符合最少知识原则，要根据具体的环境来定。</p>
<br/>
</li>
<li><p><b style='color:yellow'>OP(OpenClosed Principle) 开放&#x2F;封闭原则</b></p>
<blockquote>
<p>软件实体（类、模块、函数）等应该是可以扩展的，但是不可修改。</p>
</blockquote>
<br/>

<p><b>当需要改变一个程序的功能或者给这个程序增加新功能的时候，可以使用增加代码的方式，但是不允许改动程序的源代码。</b></p>
<br/>

<p><b>实践方法：</b></p>
<ul>
<li><p>用对象的多态性消除条件分支</p>
</li>
<li><p>找出变化的地方</p>
</li>
</ul>
<p>找出程序中将要发生变化的地方，把变化封装起来，稳定不变的部分和容易变化的部分隔离开来。在系统的演变过程中，我们只需要替换那些容易变化的部分，变化的部分使用如下方法。</p>
<ul>
<li>放置挂钩</li>
<li>使用回调函数</li>
</ul>
<br/>

<p><b>开放-封闭原则与设计模式</b></p>
<p><u><b>不管是具体的各种设计模式，还是更抽象的面向对象设计原则，</b>比如单一职责原则、最少知识原则、依赖倒置原则等，<b>都是为了让程序遵守开放-封闭原则而出现的。</b></u></p>
</li>
</ul>
<br/>

<h3 id="其他设计原则"><a href="#其他设计原则" class="headerlink" title="其他设计原则"></a><b>其他设计原则</b></h3><br/>

<ul>
<li><p><b style='color:yellow'>LSP(Liskov Substitution Principle) 里氏替换原则</b></p>
<ul>
<li>子类能覆盖(替换)父类</li>
<li>父类能出现的地方子类就能出现</li>
<li>子类可以扩展父类的功能，但不能改变父类原有的功能。</li>
</ul>
</li>
<li><p><b style='color:yellow'>ISP(Interface Segregation Principle) 接口隔离原则</b></p>
<ul>
<li>保持接口的单一独立</li>
<li>类似单一职责原则，这里更关注接口</li>
</ul>
</li>
<li><p><b style='color:yellow'>DIP(Dependency Inversion Principle) 依赖倒转原则</b></p>
<ul>
<li>面向接口编程，依赖于抽象而不依赖于具体</li>
<li>使用方只关注接口而不关注具体类的实现</li>
</ul>
</li>
<li><p><b style='color:yellow'>CRP&#x2F;CARP(Composite&#x2F;Aggregate Reuse Principle) 合成复用原则，又叫组合&#x2F;聚合复用原则</b> </p>
<ul>
<li>提高系统的封装性，提高了内聚。因为继承会把父类的成员变量和方法的实现都暴露给子类，一旦父类修改，子类也得修改。</li>
<li>使系统更加灵活，降低类之间的耦合程度。</li>
<li>提高了类的可重用性。</li>
</ul>
</li>
</ul>
<br/>

<h2 id="三、设计模式分类"><a href="#三、设计模式分类" class="headerlink" title="三、设计模式分类"></a><b>三、设计模式分类</b></h2><br/>

<blockquote>
<p>JavaScript中的设计模式一共23种，分为以下三类</p>
</blockquote>
<br/>

<ul>
<li><p>创建型</p>
<ul>
<li><a href="###%3Cb%3E%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%3C/b%3E">单例模式</a></li>
<li><a href="###%3Cb%3E%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%3C/b%3E">原型模式（简单工厂模式）</a></li>
<li><a href="###%3Cb%3E%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%3C/b%3E">工厂模式</a></li>
<li><a href="###%3Cb%3E%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%3C/b%3E">抽象工厂模式</a></li>
<li><a href="###%3Cb%3E%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F%3C/b%3E">建造者模式（生成器）</a></li>
</ul>
</li>
<li><p>结构型</p>
<ul>
<li><a href="###%3Cb%3E%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%3C/b%3E">适配器模式</a></li>
<li><a href="###%3Cb%3E%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F%3C/b%3E">装饰器模式</a></li>
<li><a href="###%3Cb%3E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%3C/b%3E">代理模式</a></li>
<li><a href="###%3Cb%3E%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%3C/b%3E">外观模式</a></li>
<li><a href="###%3Cb%3E%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%3C/b%3E">桥接模式</a></li>
<li><a href="###%3Cb%3E%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%3C/b%3E">组合模式</a></li>
<li><a href="###%3Cb%3E%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%3C/b%3E">享元模式</a></li>
</ul>
</li>
<li><p>行为型</p>
<ul>
<li><a href="###%3Cb%3E%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%3C/b%3E">观察者模式</a></li>
<li><a href="###%3Cb%3E%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F%3C/b%3E">迭代器模式</a></li>
<li><a href="###%3Cb%3E%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%3C/b%3E">策略模式</a></li>
<li><a href="###%3Cb%3E%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%3C/b%3E">模板方法模式</a></li>
<li><a href="###%3Cb%3E%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%3C/b%3E">职责链（责任链）模式</a></li>
<li><a href="###%3Cb%3E%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F%3C/b%3E">命令模式</a></li>
<li><a href="###%3Cb%3E%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F%3C/b%3E">备忘录模式</a></li>
<li><a href="###%3Cb%3E%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%3C/b%3E">状态模式</a></li>
<li><a href="###%3Cb%3E%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F%3C/b%3E">访问者模式</a></li>
<li><a href="###%3Cb%3E%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F%3C/b%3E">中介者模式</a></li>
<li><a href="###%3Cb%3E%E8%A7%A3%E6%9E%90%E5%99%A8%E6%A8%A1%E5%BC%8F%3C/b%3E">解释器（解析器）模式</a></li>
</ul>
</li>
</ul>
<br/>

<h3 id="设计模式比较"><a href="#设计模式比较" class="headerlink" title="设计模式比较"></a><b>设计模式比较</b></h3><br/>

<table>
<thead>
<tr>
<th align="left">所属类型</th>
<th align="left">模式名称</th>
<th align="left">模式</th>
<th align="left">简单定义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">创建型</td>
<td align="left">Singleton</td>
<td align="left"><b style='color:red'>单例</b></td>
<td align="left">保证一个类只有一个实例，并提供一个访问它的全局访问点。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">创建型</td>
<td align="left">Abstract Factory</td>
<td align="left">抽象工厂</td>
<td align="left">提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们的具体类。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">创建型</td>
<td align="left">Factory Method</td>
<td align="left"><b style='color:red'>工厂方法</b></td>
<td align="left">定义一个用于创建对象的接口，让子类决定实例化哪一个类，Factory Method使一个类的实例化延迟到了子类。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">创建型</td>
<td align="left">Builder</td>
<td align="left">生成器</td>
<td align="left">将一个复杂对象的构建与他的表示相分离，使得同样的构建过程可以创建不同的表示。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">创建型</td>
<td align="left">Prototype</td>
<td align="left">原型</td>
<td align="left">用原型实例指定创建对象的种类，并且通过拷贝这些原型来创建新的对象。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">结构型</td>
<td align="left">Flyweight</td>
<td align="left"><b style='color:red'>享元</b></td>
<td align="left">享元模式以共享的方式高效的支持大量的细粒度对象。享元模式能做到共享的关键是区分内蕴状态和外蕴状态。内蕴状态存储在享元内部，不会随环境的改变而有所不同。外蕴状态是随环境的改变而改变的。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">结构型</td>
<td align="left">Bridge</td>
<td align="left">桥接</td>
<td align="left">将抽象部分与它的实现部分相分离，使他们可以独立的变化。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">结构型</td>
<td align="left">Composite</td>
<td align="left">组合模式</td>
<td align="left">将对象组合成树形结构以表示部分整体的关系，Composite使得用户对单个对象和组合对象的使用具有一致性。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">结构型</td>
<td align="left">FAÇADE</td>
<td align="left">外观</td>
<td align="left">为子系统中的一组接口提供一致的界面，facade提供了一高层接口，这个接口使得子系统更容易使用。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">结构型</td>
<td align="left">Adapter</td>
<td align="left">适配器</td>
<td align="left">将一类的接口转换成客户希望的另外一个接口，Adapter模式使得原本由于接口不兼容而不能一起工作那些类可以一起工作。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">结构型</td>
<td align="left">Decorator</td>
<td align="left"><b style='color:red'>装饰器</b></td>
<td align="left">动态地给一个对象增加一些额外的职责，就增加的功能来说，Decorator模式相比生成子类更加灵活。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">结构型</td>
<td align="left">Proxy</td>
<td align="left"><b style='color:red'>代理</b></td>
<td align="left">为其他对象提供一种代理以控制对这个对象的访问</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Iterator</td>
<td align="left">迭代器</td>
<td align="left">提供一个方法顺序访问一个聚合对象的各个元素，而又不需要暴露该对象的内部表示。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Observer</td>
<td align="left"><b style='color:red'>观察者</b></td>
<td align="left">定义对象间一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知自动更新。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Template Method</td>
<td align="left">模板方法</td>
<td align="left">定义一个操作中的算法的骨架，而将一些步骤延迟到子类中，Template Method使得子类可以不改变一个算法的结构即可以重定义该算法得某些特定步骤。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Command</td>
<td align="left">命令</td>
<td align="left">将一个请求封装为一个对象，从而使你可以用不同的请求对客户进行参数化，对请求排队和记录请求日志，以及支持可撤销的操作。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">State</td>
<td align="left">状态</td>
<td align="left">允许对象在其内部状态改变时改变他的行为。对象看起来似乎改变了他的类。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Strategy</td>
<td align="left">策略模式</td>
<td align="left">定义一系列的算法，把他们一个个封装起来，并使他们可以互相替换，本模式使得算法可以独立于使用它们的客户。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">China  of Responsibility</td>
<td align="left">职责链</td>
<td align="left">使多个对象都有机会处理请求，从而避免请求的送发者和接收者之间的耦合关系</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Mediator</td>
<td align="left">中介者</td>
<td align="left">用一个中介对象封装一些列的对象交互。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Visitor</td>
<td align="left">访问者模式</td>
<td align="left">表示一个作用于某对象结构中的各元素的操作，它使你可以在不改变各元素类的前提下定义作用于这个元素的新操作。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Interpreter</td>
<td align="left">解释器</td>
<td align="left">给定一个语言，定义他的文法的一个表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left">行为型</td>
<td align="left">Memento</td>
<td align="left">备忘录</td>
<td align="left">在不破坏对象的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。</td>
</tr>
<tr>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
<td align="left">:-</td>
</tr>
<tr>
<td align="left"><td colspan='4'><b style='color:red'>注意：</b>红色为最常用设计模式</td></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<br/>

<br/>

<h3 id="1、创建型"><a href="#1、创建型" class="headerlink" title="1、创建型"></a><b>1、创建型</b></h3><br/>

<blockquote>
<p>图例</p>
</blockquote>
<p><img src="/img/11-1.png"></p>
<br/>

<h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a><b>单例模式</b></h3><br/>

<p><b>三要素：</b></p>
<ul>
<li>同一个实例</li>
<li>类自行创建实例对象</li>
<li>可向整个系统输出这个实例</li>
</ul>
<p><b>分类：</b></p>
<ul>
<li>饿汉式（ 类加载到实例时创建实例对象）</li>
<li>懒汉式（ 第一次使用时才创建实例对象）</li>
</ul>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//示例一</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">class</span> <span class="title class_">LoginForm</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;hide&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">show</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> === <span class="string">&#x27;show&#x27;</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;已经显示&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;show&#x27;</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;登录框显示成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">hide</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> === <span class="string">&#x27;hide&#x27;</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;已经隐藏&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;hide&#x27;</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;登录框隐藏成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="title class_">LoginForm</span>.<span class="property">getInstance</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> instance</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!instance) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">LoginForm</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj1 = <span class="title class_">LoginForm</span>.<span class="title function_">getInstance</span>()</span><br><span class="line">obj1.<span class="title function_">show</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = <span class="title class_">LoginForm</span>.<span class="title function_">getInstance</span>()</span><br><span class="line">obj2.<span class="title function_">hide</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1 === obj2)</span><br><span class="line"></span><br><span class="line"><span class="comment">//懒汉式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 手机 用来打电话，玩游戏，看电影，且都是同一个手机</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Phone</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 规定只能使用 Phone.getInstance 获取实例</span></span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Please use Phone.getInstance() to get the object.&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> has = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">var</span> phone = <span class="literal">null</span>;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(res, <span class="string">&#x27;getInstance&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">value</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; </span><br><span class="line">            <span class="keyword">if</span> (has) &#123;</span><br><span class="line">                <span class="keyword">return</span> phone;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                has = <span class="literal">true</span>;</span><br><span class="line">                <span class="comment">// 调用时才创建实例</span></span><br><span class="line">                phone = &#123;</span><br><span class="line">                    call () &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;打电话&quot;</span>);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    playGame () &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;玩游戏&quot;</span>);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    watchMovie () &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;看电影&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> phone;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">writable</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">configurable</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;());</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> p1 = <span class="title class_">Phone</span>.<span class="title function_">getInstance</span>();</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="title class_">Phone</span>.<span class="title function_">getInstance</span>();</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="title class_">Phone</span>.<span class="title function_">getInstance</span>();</span><br><span class="line">p1.<span class="title function_">call</span>();</span><br><span class="line">p2.<span class="title function_">playGame</span>();</span><br><span class="line">p3.<span class="title function_">watchMovie</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1 === p2 &amp;&amp; p2 === p3);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 饿汉式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 手机 用来打电话，玩游戏，看电影，且都是同一个手机</span></span><br><span class="line"><span class="comment">// 规定只能使用 Phone.getInstance 获取实例</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Phone</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 在此创建实例，装入内存时 实例已创建</span></span><br><span class="line">    <span class="keyword">var</span> phone = &#123;</span><br><span class="line">        call () &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;打电话&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        playGame () &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;玩游戏&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        watchMovie () &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;看电影&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Please use Phone.getInstance() to get the object.&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(res, <span class="string">&#x27;getInstance&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">value</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> phone;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">writable</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">configurable</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;());</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> p1 = <span class="title class_">Phone</span>.<span class="title function_">getInstance</span>();</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="title class_">Phone</span>.<span class="title function_">getInstance</span>();</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="title class_">Phone</span>.<span class="title function_">getInstance</span>();</span><br><span class="line">p1.<span class="title function_">call</span>();</span><br><span class="line">p2.<span class="title function_">playGame</span>();</span><br><span class="line">p3.<span class="title function_">watchMovie</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1 === p2 &amp;&amp; p2 === p3);</span><br><span class="line"> </span><br><span class="line"><span class="title class_">Phone</span>.<span class="property">getInstance</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;I am Groot!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p4 = <span class="title class_">Phone</span>.<span class="title function_">getInstance</span>();</span><br><span class="line">p4.<span class="title function_">call</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a><b>简单工厂模式</b></h3><br/>

<p><b>定义：</b></p>
<p>定义一个工厂，工厂定义一个方法，该方法可以根据传入的参数去返回某一个类的实例。</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello， My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> student = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaoming&quot;</span>)</span><br><span class="line">student.<span class="title function_">sayHello</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据参数决定去实例汽车还是摩托车</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 定义接口</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Vehicle</span> = &#123;</span><br><span class="line">    run () &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;跑...&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//汽车类</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Car</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;汽车&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Car</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">Vehicle</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//摩托车类</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Moto</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;摩托车&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Moto</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">Vehicle</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 车库</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Garage</span> = &#123;</span><br><span class="line">    chooseVehicle (constructor) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">constructor</span>(<span class="params"></span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(<span class="title class_">Garage</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> car = <span class="title class_">Garage</span>.<span class="title function_">chooseVehicle</span>(<span class="title class_">Car</span>);</span><br><span class="line"><span class="keyword">var</span> moto = <span class="title class_">Garage</span>.<span class="title function_">chooseVehicle</span>(<span class="title class_">Moto</span>);</span><br><span class="line">car.<span class="title function_">run</span>();</span><br><span class="line">moto.<span class="title function_">run</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="工厂方法"><a href="#工厂方法" class="headerlink" title="工厂方法"></a><b>工厂方法</b></h3><br/>

<p><b>简要：</b></p>
<p>定义一个工厂接口，接口存在一个创建产品类的方法，为每个类创建一个这样的类工厂。</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;init&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fun&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line">    <span class="title function_">create</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Product</span>(name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// use</span></span><br><span class="line"><span class="keyword">let</span> factory = <span class="keyword">new</span> <span class="title class_">Factory</span>()</span><br><span class="line"><span class="keyword">let</span> p = factory.<span class="title function_">create</span>(<span class="string">&#x27;p1&#x27;</span>)</span><br><span class="line">p.<span class="title function_">init</span>()</span><br><span class="line">p.<span class="title function_">fun</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 工厂方法，创建工厂接口，为每个类创建一个工厂</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义接口</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Vehicle</span> = &#123;</span><br><span class="line">    run () &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;跑...&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//汽车类</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Car</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;汽车&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Car</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">Vehicle</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//摩托车类</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Moto</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;摩托车&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Moto</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">Vehicle</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 汽车车库</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CarGarage</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createVehicle</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">freeze</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 摩托车车库</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MotoGarage</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createVehicle</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Moto</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">freeze</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> carGarage = <span class="keyword">new</span> <span class="title class_">CarGarage</span>();</span><br><span class="line"><span class="keyword">var</span> motoGarage = <span class="keyword">new</span> <span class="title class_">MotoGarage</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> car = carGarage.<span class="title function_">createVehicle</span>();</span><br><span class="line"><span class="keyword">var</span> moto = motoGarage.<span class="title function_">createVehicle</span>();</span><br><span class="line">car.<span class="title function_">run</span>();</span><br><span class="line">moto.<span class="title function_">run</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="抽象工厂"><a href="#抽象工厂" class="headerlink" title="抽象工厂"></a><b>抽象工厂</b></h3><br/>

<p><b>简要：</b></p>
<p>对比于工厂方法，抽象工厂可以说是多种产品，每种产品都要用工厂方法实现。</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生产枪的工厂</span></span><br><span class="line"><span class="comment">// createGun 生产枪</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// ak47 枪工厂，生产 ak47 枪</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Ak47GunCompany</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createGun</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;生产 ak47 枪...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 巴雷特 枪工厂，生产 巴雷特 枪</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BarrettGunCompany</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createGun</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;生产 巴雷特 枪...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 生产子弹的工厂</span></span><br><span class="line"><span class="comment">// createBubble 生产子弹</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// ak47 子弹工厂，生产 ak47 子弹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Ak47BubbleCompany</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createBubble</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;生产 ak47 子弹...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 巴雷特 子弹工厂，生产 巴雷特 子弹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BarrettBubbleCompany</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createBubble</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;生产 巴雷特 子弹...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 武器工厂，生产枪和子弹</span></span><br><span class="line"><span class="comment">// createGun 生产枪</span></span><br><span class="line"><span class="comment">// createBubble 生产子弹</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// ak47 武器工厂，生产 ak47枪 和 ak47 子弹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Ak47Company</span> () &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> ak47GunCompany = <span class="keyword">new</span> <span class="title class_">Ak47GunCompany</span>();</span><br><span class="line">    <span class="keyword">var</span> ak47BubbleCompany = <span class="keyword">new</span> <span class="title class_">Ak47BubbleCompany</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createGun</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        ak47GunCompany.<span class="title function_">createGun</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createBubble</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        ak47BubbleCompany.<span class="title function_">createBubble</span>();</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 巴雷特 武器工厂，生产 巴雷特枪 和 巴雷特子弹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BarrettCompany</span> () &#123;</span><br><span class="line">    <span class="keyword">var</span> barrettGunCompany = <span class="keyword">new</span> <span class="title class_">BarrettGunCompany</span>();</span><br><span class="line">    <span class="keyword">var</span> barrettBubbleCompany = <span class="keyword">new</span> <span class="title class_">BarrettBubbleCompany</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createGun</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        barrettGunCompany.<span class="title function_">createGun</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">createBubble</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        barrettBubbleCompany.<span class="title function_">createBubble</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> ak47Company = <span class="keyword">new</span> <span class="title class_">Ak47Company</span>();</span><br><span class="line"><span class="keyword">var</span> barrettCompany = <span class="keyword">new</span> <span class="title class_">BarrettCompany</span>();</span><br><span class="line">ak47Company.<span class="title function_">createGun</span>();</span><br><span class="line">ak47Company.<span class="title function_">createBubble</span>();</span><br><span class="line">barrettCompany.<span class="title function_">createGun</span>();</span><br><span class="line">barrettCompany.<span class="title function_">createBubble</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a><b>建造者模式</b></h3><br/>

<p><b>简要：</b></p>
<p>当构造一个实例的时候，需要执行多个步骤才能生成实例，并且每个步骤有多种选择从而会生成多种实例的时候使用。</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 适用于 构造一个实例对象需要多个步骤，且每个步骤可能不同会导致不同的实例类</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 果汁制作步骤</span></span><br><span class="line"><span class="comment"> *  StirFruit()  将水果打碎</span></span><br><span class="line"><span class="comment"> *  addWater() 加水</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 西瓜汁制作步骤</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WatermelonJuiceStep</span>(<span class="params"></span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">StirFruit</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;将西瓜打碎...&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">addWater</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;加水...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 橙汁制作步骤</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">OrangeJuiceStep</span>(<span class="params"></span>) &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">StirFruit</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;将橙子打碎...&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">addWater</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;加水...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 果汁生成器</span></span><br><span class="line"><span class="comment"> *  make() 生成果汁</span></span><br><span class="line"><span class="comment"> *  getJuice() 获取制作的果汁</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 西瓜汁生成器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WatermelonJuiceMaker</span> () &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> maker = <span class="keyword">new</span> <span class="title class_">WatermelonJuiceStep</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">make</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        maker.<span class="title class_">StirFruit</span>();</span><br><span class="line">        maker.<span class="title function_">addWater</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getJuice</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> maker;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 橙汁生成器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">OrangeJuiceMaker</span> () &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">var</span> maker = <span class="keyword">new</span> <span class="title class_">OrangeJuiceStep</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">make</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        maker.<span class="title class_">StirFruit</span>();</span><br><span class="line">        maker.<span class="title function_">addWater</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getJuice</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> maker;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 果汁生成器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">JuiceMaker</span>(<span class="params"></span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> orangeJuiceMaker = <span class="keyword">new</span> <span class="title class_">OrangeJuiceMaker</span>();</span><br><span class="line">    <span class="keyword">var</span> watermelonJuiceMaker = <span class="keyword">new</span> <span class="title class_">WatermelonJuiceMaker</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">makeOrangeJuice</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        orangeJuiceMaker.<span class="title function_">make</span>();</span><br><span class="line">        <span class="keyword">return</span> orangeJuiceMaker.<span class="title function_">getJuice</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">makeWatermelonJuice</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        watermelonJuiceMaker.<span class="title function_">make</span>();</span><br><span class="line">        <span class="keyword">return</span> watermelonJuiceMaker.<span class="title function_">getJuice</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 使用果汁生成器</span></span><br><span class="line"><span class="keyword">var</span> juiceMaker = <span class="keyword">new</span> <span class="title class_">JuiceMaker</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> watermelonJuice = juiceMaker.<span class="title function_">makeWatermelonJuice</span>();</span><br><span class="line"><span class="keyword">var</span> orangeJuice = juiceMaker.<span class="title function_">makeOrangeJuice</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="2、结构型"><a href="#2、结构型" class="headerlink" title="2、结构型"></a><b>2、结构型</b></h3><br/>

<blockquote>
<p>图例</p>
</blockquote>
<p><img src="/img/11-2.png"></p>
<br/>

<h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a><b>代理模式</b></h3><br/>

<p><b>简要：</b></p>
<p>共同继承同一接口或抽象类，代理类包含被代理类（has-a)</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代理模式</span></span><br><span class="line"><span class="comment">// 共同继承同一接口或抽象类，代理类包含被代理类（has-a)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Flower</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> xiaoming = &#123;</span><br><span class="line">  <span class="attr">sendFlower</span>: <span class="keyword">function</span>(<span class="params">target</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> flower = <span class="keyword">new</span> <span class="title class_">Flower</span>()</span><br><span class="line">    target.<span class="title function_">receiveFlower</span>(flower)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> B = &#123;</span><br><span class="line">  <span class="attr">receiveFlower</span>: <span class="keyword">function</span>(<span class="params">flower</span>) &#123;</span><br><span class="line">    A.<span class="title function_">listenGoodMood</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      A.<span class="title function_">receiveFlower</span>(flower)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> A = &#123;</span><br><span class="line">  <span class="attr">receiveFlower</span>: <span class="keyword">function</span>(<span class="params">flower</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;收到花&#x27;</span>+ flower)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">listenGoodMood</span>: <span class="keyword">function</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">fn</span>()</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">xiaoming.<span class="title function_">sendFlower</span>(B)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：帮别人考试</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 接口（考试人）</span></span><br><span class="line"><span class="comment"> *  test() 参加考试</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 被代理人考试</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testSelf</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">test</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;参加考试，可是我不会.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 代理人考试</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testOther</span>(<span class="params">self</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">test</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;参加考试，我会.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> self = <span class="keyword">new</span> <span class="title function_">testSelf</span>();</span><br><span class="line"><span class="keyword">var</span> other = <span class="keyword">new</span> <span class="title function_">testOther</span>(self);</span><br><span class="line">other.<span class="title function_">test</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a><b>适配器模式</b></h3><br/>

<p><b>简要：</b></p>
<p>将两个不能一块工作的接口或者类，通过新建一个类继承两者，从而使得可以一起工作</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 适配器模式</span></span><br><span class="line"><span class="comment">// 将两个不能一块工作的接口或者类，通过新建一个类继承两者，从而使得可以一起工作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Plug</span> &#123;</span><br><span class="line">  <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;iphone充电头&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Target</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">plug</span> = <span class="keyword">new</span> <span class="title class_">Plug</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">plug</span>.<span class="title function_">getName</span>() + <span class="string">&#x27; 适配器Type-c充电头&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> target = <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">target.<span class="title function_">getName</span>(); <span class="comment">// iphone充电头 适配器转Type-c充电头</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 比如小米8的方形耳机插口与圆形耳机接头需要耳机适配器才能工作</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 手机接口</span></span><br><span class="line"><span class="comment"> *  access() 提供的接口类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Mi8</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">access</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;小米8提供方形插口.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 耳机接头</span></span><br><span class="line"><span class="comment"> *  insert() 提供的接头类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MiHeadset</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">insert</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;小米耳机提供圆形插头.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 适配器 需要实现 手机接口与耳机接头</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">HeadsetAdapter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">access</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;耳机适配器提供圆形插口.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">insert</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;耳机适配器提供方形插头.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> mi8 = <span class="keyword">new</span> <span class="title class_">Mi8</span>();</span><br><span class="line"><span class="keyword">var</span> miHeadset = <span class="keyword">new</span> <span class="title class_">MiHeadset</span>();</span><br><span class="line"><span class="keyword">var</span> headsetAdapter = <span class="keyword">new</span> <span class="title class_">HeadsetAdapter</span>();</span><br><span class="line">mi8.<span class="title function_">access</span>();</span><br><span class="line">headsetAdapter.<span class="title function_">insert</span>();</span><br><span class="line">headsetAdapter.<span class="title function_">access</span>();</span><br><span class="line">miHeadset.<span class="title function_">insert</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a><b>桥接模式</b></h3><br/>

<p><b>简要：</b></p>
<p>主要是两个不同的类有多种种类，通过 has-a 组合方式去进行多种类的结合</p>
<p><b>示例代码：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 桥接模式，主要是两个不同的类有多种种类，通过 has-a 组合方式去进行多种类的结合</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,color</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">color</span> = color </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">draw</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.color.name&#125;</span> <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="keyword">let</span> red = <span class="keyword">new</span> <span class="title class_">Color</span>(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> yellow = <span class="keyword">new</span> <span class="title class_">Color</span>(<span class="string">&#x27;yellow&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> circle = <span class="keyword">new</span> <span class="title class_">Shape</span>(<span class="string">&#x27;circle&#x27;</span>, red)</span><br><span class="line">circle.<span class="title function_">draw</span>()</span><br><span class="line"><span class="keyword">let</span> triangle = <span class="keyword">new</span> <span class="title class_">Shape</span>(<span class="string">&#x27;triangle&#x27;</span>, yellow)</span><br><span class="line">triangle.<span class="title function_">draw</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 场景：</span></span><br><span class="line"><span class="comment"> *  鞋子有跑鞋，篮球鞋，鞋子的品牌有李宁，耐克</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 接口：鞋柜 ShoesBar</span></span><br><span class="line"><span class="comment"> *  saleShoes()  出售鞋子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 继承鞋柜接口：跑鞋鞋柜 </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">RunShoesBar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">saleShoes</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;出售跑鞋.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 继承鞋柜接口：篮球鞋鞋柜</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BasketballShoesBar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">saleShoes</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;出售篮球鞋.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 抽象类：品牌鞋柜</span></span><br><span class="line"><span class="comment"> *  shoesBar 继承 ShoesBar 的鞋柜</span></span><br><span class="line"><span class="comment"> *  saleShoes 鞋柜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 品牌鞋柜继承类：李宁鞋柜</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">LiNingShoesBar</span>(<span class="params">shoesBar</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> shoesBar = shoesBar;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">saleShoes</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;李宁鞋柜：&quot;</span>);</span><br><span class="line">        shoesBar.<span class="title function_">saleShoes</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 品牌鞋柜继承类：耐克鞋柜</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NickShoesBar</span>(<span class="params">shoesBar</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> shoesBar = shoesBar;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">saleShoes</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;耐克鞋柜：&quot;</span>);</span><br><span class="line">        shoesBar.<span class="title function_">saleShoes</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="comment">// 定义一个跑鞋柜</span></span><br><span class="line"><span class="keyword">var</span> runShoesBar = <span class="keyword">new</span> <span class="title class_">RunShoesBar</span>();</span><br><span class="line"><span class="comment">// 定义一个李宁的跑鞋柜</span></span><br><span class="line"><span class="keyword">var</span> liningRunShoesBar = <span class="keyword">new</span> <span class="title class_">LiNingShoesBar</span>(runShoesBar);</span><br><span class="line">liningRunShoesBar.<span class="title function_">saleShoes</span>();</span><br><span class="line"><span class="comment">// 定义一个耐克的跑鞋柜</span></span><br><span class="line"><span class="keyword">var</span> nickShoesBar = <span class="keyword">new</span> <span class="title class_">NickShoesBar</span>(runShoesBar);</span><br><span class="line">nickShoesBar.<span class="title function_">saleShoes</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a><b>组合模式</b></h3><br/>

<p><b>简要：</b></p>
<p>就是不同层级的两个类具有极其相似的结构，可以只构造一个类来表示这两个类</p>
<p><b>示例代码：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 组合模式：就是不同层级的两个类具有极其相似的结构，可以只构造一个类来表示这两个类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TrainOrder</span> &#123;</span><br><span class="line">	create () &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;创建火车票订单&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HotelOrder</span> &#123;</span><br><span class="line">	create () &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;创建酒店订单&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TotalOrder</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span> () &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">orderList</span> = []</span><br><span class="line">	&#125;</span><br><span class="line">	addOrder (order) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">orderList</span>.<span class="title function_">push</span>(order)</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">	&#125;</span><br><span class="line">	create () &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">orderList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">			item.<span class="title function_">create</span>()</span><br><span class="line">		&#125;)</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 可以在购票网站买车票同时也订房间</span></span><br><span class="line"><span class="keyword">let</span> train = <span class="keyword">new</span> <span class="title class_">TrainOrder</span>()</span><br><span class="line"><span class="keyword">let</span> hotel = <span class="keyword">new</span> <span class="title class_">HotelOrder</span>()</span><br><span class="line"><span class="keyword">let</span> total = <span class="keyword">new</span> <span class="title class_">TotalOrder</span>()</span><br><span class="line">total.<span class="title function_">addOrder</span>(train).<span class="title function_">addOrder</span>(hotel).<span class="title function_">create</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：表示爷爷，爸爸，儿子三代关系</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 接口：属于人，都有名字</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setName</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;,</span><br><span class="line">    display () &#123;</span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// 爷爷和爸爸都是父亲，都有儿子，所以...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Father</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setName</span>(name);</span><br><span class="line">    <span class="keyword">var</span> sons = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">add</span> = <span class="keyword">function</span> (<span class="params">person</span>) &#123;</span><br><span class="line">        sons.<span class="title function_">push</span>(person);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">display</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;作为父亲：&quot;</span> + <span class="variable language_">this</span>.<span class="title function_">getName</span>());</span><br><span class="line">        sons.<span class="title function_">forEach</span>(<span class="function">(<span class="params">son</span>) =&gt;</span> &#123;</span><br><span class="line">            son.<span class="title function_">display</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 继承一下</span></span><br><span class="line"><span class="title class_">Father</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Person</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 作为儿子，只能是儿子</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setName</span>(name);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">display</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;作为儿子：&quot;</span> + <span class="variable language_">this</span>.<span class="title function_">getName</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 继承以下</span></span><br><span class="line"><span class="title class_">Son</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Person</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> grandfather = <span class="keyword">new</span> <span class="title class_">Father</span>(<span class="string">&quot;张爷爷&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> father1 = <span class="keyword">new</span> <span class="title class_">Father</span>(<span class="string">&quot;张伯伯&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> father2 = <span class="keyword">new</span> <span class="title class_">Father</span>(<span class="string">&quot;张大爷&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> son1 = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&quot;张娃子&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> son2 = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&quot;张嘎子&quot;</span>);</span><br><span class="line">grandfather.<span class="title function_">add</span>(father1);</span><br><span class="line">grandfather.<span class="title function_">add</span>(father2);</span><br><span class="line">father1.<span class="title function_">add</span>(son1);</span><br><span class="line">father2.<span class="title function_">add</span>(son2);</span><br><span class="line">grandfather.<span class="title function_">display</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a><b>装饰器模式</b></h3><br/>

<p><b>简要：</b></p>
<p>装饰模式，基本类和装饰类共同继承某个接口或者抽象类， 通过装饰类包含基本类以及在装饰类中添加装饰方法的方式去装饰基本类</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cellphone</span> &#123;</span><br><span class="line">    <span class="title function_">create</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;生成一个手机&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Decorator</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">cellphone</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cellphone</span> = cellphone</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">create</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cellphone</span>.<span class="title function_">create</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">createShell</span>(cellphone)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">createShell</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;生成手机壳&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 测试代码</span></span><br><span class="line"><span class="keyword">let</span> cellphone = <span class="keyword">new</span> <span class="title class_">Cellphone</span>()</span><br><span class="line">cellphone.<span class="title function_">create</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;------------&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> dec = <span class="keyword">new</span> <span class="title class_">Decorator</span>(cellphone)</span><br><span class="line">dec.<span class="title function_">create</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 场景：lol 英雄buff, 普通英雄，露露buff，努努buff</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 公共接口：Hero</span></span><br><span class="line"><span class="comment"> *  getBuff() 获取英雄的 buff</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NormalHero</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getBuff</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;初始的英雄，无 buff.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 加露露 buff </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">LuLuBuffHero</span>(<span class="params">hero</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getBuff</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        hero.<span class="title function_">getBuff</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;加露露 buff.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 加努努 buff</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NuNuBuffHero</span>(<span class="params">hero</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getBuff</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        hero.<span class="title function_">getBuff</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;加努努 buff.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> noBuffHero = <span class="keyword">new</span> <span class="title class_">NormalHero</span>();</span><br><span class="line"><span class="keyword">var</span> luluBuffHero = <span class="keyword">new</span> <span class="title class_">LuLuBuffHero</span>(noBuffHero);</span><br><span class="line"><span class="keyword">var</span> nunuBuffHero = <span class="keyword">new</span> <span class="title class_">NuNuBuffHero</span>(luluBuffHero);</span><br><span class="line">nunuBuffHero.<span class="title function_">getBuff</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a><b>外观模式</b></h3><br/>

<p><b>简要：</b></p>
<p>通过统一的管理类对内部类管理，同时暴露接口接收来自外部类的消息</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//兼容浏览器事件绑定</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> addMyEvent = <span class="keyword">function</span> (<span class="params">el, ev, fn</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (el.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">        el.<span class="title function_">addEventListener</span>(ev, fn, <span class="literal">false</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (el.<span class="property">attachEvent</span>) &#123;</span><br><span class="line">        el.<span class="title function_">attachEvent</span>(<span class="string">&#x27;on&#x27;</span> + ev, fn)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        el[<span class="string">&#x27;on&#x27;</span> + ev] = fn</span><br><span class="line">    &#125;</span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//封装接口</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myEvent = &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">stop</span>: <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        e.<span class="title function_">stopPropagation</span>();</span><br><span class="line">        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 外观模式</span></span><br><span class="line"><span class="comment"> *  通过统一的管理类对内部类管理，同时暴露接口接收来自外部类的消息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景描述： 需求人员提出需求，开发人员进行开发，测试人员进行测试</span></span><br><span class="line"><span class="comment">// 需求人员不需要通知开发人员去开发，测试人员去测试</span></span><br><span class="line"><span class="comment">// 只需要告诉小组组长这个需求就可以了</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 开发人员，负责开发需求</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Developter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">develop</span> = <span class="keyword">function</span>(<span class="params">demand_name</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开发人员开发需求：&quot;</span> + demand_name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试人员，负责测试需求</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Tester</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">test</span> = <span class="keyword">function</span> (<span class="params">demand_name</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;测试人员测试需求：&quot;</span> + demand_name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 技术部组长，负责安排开发人员开发和测试人员测试</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Leader</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> developer = <span class="keyword">new</span> <span class="title class_">Developter</span>();</span><br><span class="line">    <span class="keyword">var</span> tester = <span class="keyword">new</span> <span class="title class_">Tester</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">processDemand</span> = <span class="keyword">function</span> (<span class="params">demand_name</span>) &#123;</span><br><span class="line">        developer.<span class="title function_">develop</span>(demand_name);</span><br><span class="line">        tester.<span class="title function_">test</span>(demand_name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 需求人员，提出需求</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demander</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> leader = <span class="keyword">new</span> <span class="title class_">Leader</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">demand</span> = <span class="keyword">function</span> (<span class="params">demand_name</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;提出需求：&quot;</span> + demand_name);</span><br><span class="line">        leader.<span class="title function_">processDemand</span>(demand_name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> demand_name = <span class="string">&quot;开发一款MOBA游戏.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> demander = <span class="keyword">new</span> <span class="title class_">Demander</span>();</span><br><span class="line">demander.<span class="title function_">demand</span>(demand_name);</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a><b>享元模式</b></h3><br/>

<p><b>简要：</b></p>
<p>对于系统中使用的一些对象可以共享使用，那么每次使用时先判断有没有，有直接使用，没有再去创建，节省内存空间</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 享元模式</span></span><br><span class="line"><span class="comment"> *  对于系统中使用的一些对象可以共享使用，那么每次使用时先判断有没有</span></span><br><span class="line"><span class="comment"> *  有直接使用，没有再去创建，节省内存空间</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景1：</span></span><br><span class="line"><span class="comment">// 土豪打英雄联盟，想用哪个皮肤，就用哪个</span></span><br><span class="line"><span class="comment">// 有皮肤直接使用，没有就买买买...</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 英雄皮肤类</span></span><br><span class="line"><span class="comment"> *  name 皮肤名字</span></span><br><span class="line"><span class="comment"> *  show() 皮肤展示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">HeroSkin</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;玩家购买了&quot;</span> + name + <span class="string">&quot;皮肤&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;玩家使用了&quot;</span> + name + <span class="string">&quot;皮肤&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 玩家以及拥有的皮肤</span></span><br><span class="line"><span class="comment"> *  useSkin(skinName) 使用皮肤</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Player</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> mySkins = &#123;&#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">useSkin</span> = <span class="keyword">function</span> (<span class="params">skinName</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!(skinName <span class="keyword">in</span> mySkins)) &#123;</span><br><span class="line">            mySkins[skinName] = <span class="keyword">new</span> <span class="title class_">HeroSkin</span>(skinName);</span><br><span class="line">        &#125;</span><br><span class="line">        mySkins[skinName].<span class="title function_">show</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> player = <span class="keyword">new</span> <span class="title class_">Player</span>();</span><br><span class="line">player.<span class="title function_">useSkin</span>(<span class="string">&quot;伊泽瑞尔-未来战士&quot;</span>);</span><br><span class="line">player.<span class="title function_">useSkin</span>(<span class="string">&quot;锐雯-光明使者&quot;</span>);</span><br><span class="line">player.<span class="title function_">useSkin</span>(<span class="string">&quot;锐雯-光明使者&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 场景2：</span></span><br><span class="line"><span class="comment">// 驾考考生数量与车辆数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> examCarNum = <span class="number">0</span>         <span class="comment">// 驾考车总数</span></span><br><span class="line"><span class="comment">/* 驾考车对象 */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExamCar</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">carType</span>) &#123;</span><br><span class="line">        examCarNum++</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">carId</span> = examCarNum</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">carType</span> = carType ? <span class="string">&#x27;手动档&#x27;</span> : <span class="string">&#x27;自动档&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">usingState</span> = <span class="literal">false</span>    <span class="comment">// 是否正在使用</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 在本车上考试 */</span></span><br><span class="line">    <span class="title function_">examine</span>(<span class="params">candidateId</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>((<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">usingState</span> = <span class="literal">true</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`考生- <span class="subst">$&#123; candidateId &#125;</span> 开始在<span class="subst">$&#123; <span class="variable language_">this</span>.carType &#125;</span>驾考车- <span class="subst">$&#123; <span class="variable language_">this</span>.carId &#125;</span> 上考试`</span>)</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">usingState</span> = <span class="literal">false</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`%c考生- <span class="subst">$&#123; candidateId &#125;</span> 在<span class="subst">$&#123; <span class="variable language_">this</span>.carType &#125;</span>驾考车- <span class="subst">$&#123; <span class="variable language_">this</span>.carId &#125;</span> 上考试完毕`</span>, <span class="string">&#x27;color:#f40&#x27;</span>)</span><br><span class="line">                <span class="title function_">resolve</span>()                       <span class="comment">// 0~2秒后考试完毕</span></span><br><span class="line">            &#125;, <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">2000</span>)</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 手动档汽车对象池 */</span></span><br><span class="line"><span class="title class_">ManualExamCarPool</span> = &#123;</span><br><span class="line">    <span class="attr">_pool</span>: [],                  <span class="comment">// 驾考车对象池</span></span><br><span class="line">    <span class="attr">_candidateQueue</span>: [],        <span class="comment">// 考生队列</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 注册考生 ID 列表 */</span></span><br><span class="line">    <span class="title function_">registCandidates</span>(<span class="params">candidateList</span>) &#123;</span><br><span class="line">        candidateList.<span class="title function_">forEach</span>(<span class="function"><span class="params">candidateId</span> =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">registCandidate</span>(candidateId))</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 注册手动档考生 */</span></span><br><span class="line">    <span class="title function_">registCandidate</span>(<span class="params">candidateId</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> examCar = <span class="variable language_">this</span>.<span class="title function_">getManualExamCar</span>()    <span class="comment">// 找一个未被占用的手动档驾考车</span></span><br><span class="line">        <span class="keyword">if</span> (examCar) &#123;</span><br><span class="line">            examCar.<span class="title function_">examine</span>(candidateId)           <span class="comment">// 开始考试，考完了让队列中的下一个考生开始考试</span></span><br><span class="line">              .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  <span class="keyword">const</span> nextCandidateId = <span class="variable language_">this</span>.<span class="property">_candidateQueue</span>.<span class="property">length</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">_candidateQueue</span>.<span class="title function_">shift</span>()</span><br><span class="line">                  nextCandidateId &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">registCandidate</span>(nextCandidateId)</span><br><span class="line">              &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="variable language_">this</span>.<span class="property">_candidateQueue</span>.<span class="title function_">push</span>(candidateId)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 注册手动档车 */</span></span><br><span class="line">    <span class="title function_">initManualExamCar</span>(<span class="params">manualExamCarNum</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= manualExamCarNum; i++) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">_pool</span>.<span class="title function_">push</span>(<span class="keyword">new</span> <span class="title class_">ExamCar</span>(<span class="literal">true</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 获取状态为未被占用的手动档车 */</span></span><br><span class="line">    <span class="title function_">getManualExamCar</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_pool</span>.<span class="title function_">find</span>(<span class="function"><span class="params">car</span> =&gt;</span> !car.<span class="property">usingState</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ManualExamCarPool</span>.<span class="title function_">initManualExamCar</span>(<span class="number">3</span>)          <span class="comment">// 一共有3个驾考车</span></span><br><span class="line"><span class="title class_">ManualExamCarPool</span>.<span class="title function_">registCandidates</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>])  <span class="comment">// 10个考生来考试</span></span><br></pre></td></tr></table></figure>

<br/>

<h3 id="3、行为型"><a href="#3、行为型" class="headerlink" title="3、行为型"></a><b>3、行为型</b></h3><br/>

<blockquote>
<p>图例</p>
</blockquote>
<p><img src="/img/11-3.png"></p>
<br/>

<h3 id="模板方法"><a href="#模板方法" class="headerlink" title="模板方法"></a><b>模板方法</b></h3><br/>

<p><b>简要：</b></p>
<p>简单而言就是定义子类需要做什么，具体做什么交给子类去做 代码示例（java, 因为 js 没有抽象方法这些，而且我觉得模板方法主要是固定流程，实现交给子类实现）</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Beverage</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">&#123;brewDrink, addCondiment&#125;</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">brewDrink</span> = brewDrink</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">addCondiment</span> = addCondiment</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 烧开水，共用方法 */</span></span><br><span class="line">    <span class="title function_">boilWater</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;水已经煮沸=== 共用&#x27;</span>) &#125;</span><br><span class="line">    <span class="comment">/* 倒杯子里，共用方法 */</span></span><br><span class="line">    <span class="title function_">pourCup</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;倒进杯子里===共用&#x27;</span>) &#125;</span><br><span class="line">    <span class="comment">/* 模板方法 */</span></span><br><span class="line">    <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">boilWater</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">brewDrink</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">pourCup</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">addCondiment</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 咖啡 */</span></span><br><span class="line"><span class="keyword">const</span> coffee = <span class="keyword">new</span> <span class="title class_">Beverage</span>(&#123;</span><br><span class="line">     <span class="comment">/* 冲泡咖啡，覆盖抽象方法 */</span></span><br><span class="line">     <span class="attr">brewDrink</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;冲泡咖啡&#x27;</span>) &#125;,</span><br><span class="line">     <span class="comment">/* 加调味品，覆盖抽象方法 */</span></span><br><span class="line">     <span class="attr">addCondiment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;加点奶和糖&#x27;</span>) &#125;</span><br><span class="line">&#125;)</span><br><span class="line">coffee.<span class="title function_">init</span>() </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板方法</span></span><br><span class="line"><span class="comment">// 场景：召唤师选择英雄，皮肤和召唤师技能</span></span><br><span class="line"><span class="comment">// 步骤：选择英雄 -&gt; 选择皮肤 -&gt; 选择召唤师技能1 -&gt; 选择召唤师技能2</span></span><br><span class="line"><span class="comment">// 角色：召唤师（就是玩家）</span></span><br><span class="line">abstract <span class="keyword">class</span> <span class="title class_">Player</span> &#123;</span><br><span class="line">    private <span class="title class_">String</span> name;</span><br><span class="line">    public <span class="title class_">Player</span>(<span class="title class_">String</span> name) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public abstract <span class="keyword">void</span> <span class="title function_">chooseHero</span>();</span><br><span class="line">    public abstract <span class="keyword">void</span> <span class="title function_">chooseSkin</span>();</span><br><span class="line">    public abstract <span class="keyword">void</span> <span class="title function_">chooseSummonerSkillFirst</span>();</span><br><span class="line">    public abstract <span class="keyword">void</span> <span class="title function_">chooseSummonerSkillSecond</span>();</span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">show</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 显示玩家信息</span></span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;的选择：&quot;</span>);</span><br><span class="line">        <span class="comment">// 显示选择的英雄</span></span><br><span class="line">        <span class="title function_">chooseHero</span>();</span><br><span class="line">        <span class="comment">// 显示选择的皮肤</span></span><br><span class="line">        <span class="title function_">chooseSkin</span>();</span><br><span class="line">        <span class="comment">// 显示选择的召唤师技能一</span></span><br><span class="line">        <span class="title function_">chooseSummonerSkillFirst</span>();</span><br><span class="line">        <span class="comment">// 显示选择的召唤师技能二</span></span><br><span class="line">        <span class="title function_">chooseSummonerSkillSecond</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 玩家小明</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">XiaoMing</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Player</span>&#123;</span><br><span class="line">    public <span class="title class_">XiaoMing</span>()&#123;</span><br><span class="line">        <span class="variable language_">super</span>(<span class="string">&quot;小明&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    @<span class="title class_">Override</span></span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">chooseHero</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;英雄：奥拉夫&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @<span class="title class_">Override</span></span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">chooseSkin</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;皮肤：铁哥们&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @<span class="title class_">Override</span></span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">chooseSummonerSkillFirst</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;召唤师技能一：疾走&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @<span class="title class_">Override</span></span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">chooseSummonerSkillSecond</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;召唤师技能二：闪现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 玩家小张</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">XiaoZhang</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Player</span> &#123;</span><br><span class="line">    public <span class="title class_">XiaoZhang</span>() &#123;</span><br><span class="line">        <span class="variable language_">super</span>(<span class="string">&quot;小张&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    @<span class="title class_">Override</span></span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">chooseHero</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;英雄：锐雯&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @<span class="title class_">Override</span></span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">chooseSkin</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;皮肤：光明使者&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @<span class="title class_">Override</span></span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">chooseSummonerSkillFirst</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;召唤师技能一：传送&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @<span class="title class_">Override</span></span><br><span class="line">    public <span class="keyword">void</span> <span class="title function_">chooseSummonerSkillSecond</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(<span class="string">&quot;召唤师技能二：闪现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">public <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    public <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) &#123;</span><br><span class="line">        <span class="comment">// 测试</span></span><br><span class="line">        <span class="title class_">Player</span> xiaoming = <span class="keyword">new</span> <span class="title class_">XiaoMing</span>();</span><br><span class="line">        <span class="title class_">Player</span> xiaozhang = <span class="keyword">new</span> <span class="title class_">XiaoZhang</span>();</span><br><span class="line">        xiaoming.<span class="title function_">show</span>();</span><br><span class="line">        xiaozhang.<span class="title function_">show</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a><b>中介者模式</b></h3><br/>

<p><b>简要：</b></p>
<p>简单来说就是通过中介者进行数据传递，一方提供数据，一方订阅数据</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 中介者模式</span></span><br><span class="line"><span class="comment">// 简单来说就是通过中介者进行数据传递</span></span><br><span class="line"><span class="comment">// 一方提供数据，一方订阅数据</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：使用第三方买二手手机</span></span><br><span class="line"><span class="comment">// 购买者去预定手机，当出售者卖该型号的手机时候通知购买者</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 购买者构造函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> phoneName 购买人需要的手机</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Buyer</span>(<span class="params">phoneName</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getPhoneName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> phoneName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">callSellerPhone</span> = <span class="keyword">function</span>(<span class="params">phone</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`联系卖家：<span class="subst">$&#123;phone&#125;</span>买 <span class="subst">$&#123;phoneName&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 出售者构造函数</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> phoneName 卖的的手机</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> phone 卖主联系方式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Seller</span>(<span class="params">phoneName, phone</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getPhoneName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> phoneName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getPhone</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 中介者构造函数</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Intermediary</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> buyerList = [];</span><br><span class="line">    <span class="keyword">var</span> sellerList = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">addBuyer</span> = <span class="keyword">function</span>(<span class="params">buyer</span>) &#123;</span><br><span class="line">        <span class="comment">// 若存在一个合适的卖家，直接通知买主，不添加到列表</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> sellerList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i.<span class="title function_">getPhoneName</span>() === buyer.<span class="title function_">getPhoneName</span>()) &#123;</span><br><span class="line">                buyer.<span class="title function_">callSellerPhone</span>(i.<span class="title function_">getPhone</span>());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        buyerList.<span class="title function_">push</span>(buyer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">addSeller</span> = <span class="keyword">function</span>(<span class="params">seller</span>) &#123;</span><br><span class="line">        <span class="comment">// 若存在一个合适的买家，直接通知买主，不添加到列表</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> buyerList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i.<span class="title function_">getPhoneName</span>() === seller.<span class="title function_">getPhoneName</span>()) &#123;</span><br><span class="line">                i.<span class="title function_">callSellerPhone</span>(seller.<span class="title function_">getPhone</span>());</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        sellerList.<span class="title function_">push</span>(seller);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> intermediary = <span class="keyword">new</span> <span class="title class_">Intermediary</span>();</span><br><span class="line"><span class="keyword">var</span> buyer1 = <span class="keyword">new</span> <span class="title class_">Buyer</span>(<span class="string">&quot;小米3&quot;</span>);</span><br><span class="line">intermediary.<span class="title function_">addBuyer</span>(buyer1);</span><br><span class="line"><span class="keyword">var</span> buyer2 = <span class="keyword">new</span> <span class="title class_">Buyer</span>(<span class="string">&quot;小米8&quot;</span>);</span><br><span class="line">intermediary.<span class="title function_">addBuyer</span>(buyer2);</span><br><span class="line"><span class="keyword">var</span> seller1 = <span class="keyword">new</span> <span class="title class_">Seller</span>(<span class="string">&quot;小米8&quot;</span>, <span class="string">&quot;15684175538&quot;</span>);</span><br><span class="line">intermediary.<span class="title function_">addSeller</span>(seller1);</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a><b>命令模式</b></h3><br/>

<p><b>简要：</b></p>
<p>使用命令模式可以在扩展调度中心的时候不修改调度中心的代码</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 命令模式</span></span><br><span class="line"><span class="comment">// 使用命令模式可以在扩展调度中心的时候不修改调度中心的代码</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：玩具遥控汽车</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 汽车构造函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ToyCar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">goOn</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;小车前进&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">stop</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;小车停止&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">speedUp</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;小车加速&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 命令接口 CarCommand</span></span><br><span class="line"><span class="comment"> *  car 遥控汽车的实例</span></span><br><span class="line"><span class="comment"> *  execute() 执行命令</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 前进的命令 extends CarCommand</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> car 汽车实例 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GoOnCommand</span>(<span class="params">car</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">execute</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        car.<span class="title function_">goOn</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 停止的命令 extends CarCommand</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> car 汽车实例</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">StopCommand</span>(<span class="params">car</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">execute</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        car.<span class="title function_">stop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 加速的命令 extends CarCommand</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> car 汽车实例</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SpeedUpCommand</span>(<span class="params">car</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">execute</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        car.<span class="title function_">speedUp</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 汽车遥控器</span></span><br><span class="line"><span class="comment"> *  setCarCommand() 设置命令</span></span><br><span class="line"><span class="comment"> *  trigger() 触发命令</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CarControlHandle</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> carCommand = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setCommand</span> = <span class="keyword">function</span>(<span class="params">newCarCommand</span>) &#123;</span><br><span class="line">        carCommand = newCarCommand;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">trigger</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        carCommand.<span class="title function_">execute</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> <span class="title class_">ToyCar</span>();</span><br><span class="line"><span class="keyword">var</span> controlHandle = <span class="keyword">new</span> <span class="title class_">CarControlHandle</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> goOn = <span class="keyword">new</span> <span class="title class_">GoOnCommand</span>(car);</span><br><span class="line">controlHandle.<span class="title function_">setCommand</span>(goOn);</span><br><span class="line">controlHandle.<span class="title function_">trigger</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> stop = <span class="keyword">new</span> <span class="title class_">StopCommand</span>(car);</span><br><span class="line">controlHandle.<span class="title function_">setCommand</span>(stop);</span><br><span class="line">controlHandle.<span class="title function_">trigger</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> speedUp = <span class="keyword">new</span> <span class="title class_">SpeedUpCommand</span>(car);</span><br><span class="line">controlHandle.<span class="title function_">setCommand</span>(speedUp);</span><br><span class="line">controlHandle.<span class="title function_">trigger</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a><b>责任链模式</b></h3><br/>

<p><b>简要：</b></p>
<p>将请求交给一条处理链，处理链上的有多个处理器处理，当处理链上某个处理器处理了该请求，返回处理的结果优点是添加删除处理器时不需要修改内部代码，只需要添加或者删除即可，符合开闭原则</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 责任链模式</span></span><br><span class="line"><span class="comment">// 将请求交给一条处理链，处理链上的有多个处理器处理，</span></span><br><span class="line"><span class="comment">// 当处理链上某个处理器处理了该请求，返回处理的结果</span></span><br><span class="line"><span class="comment">// 优点是添加删除处理器时不需要修改内部代码，只需要添加或者删除即可</span></span><br><span class="line"><span class="comment">// 符合开闭原则</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：dnf 玩家刷图打怪，怪物有普通怪，精英怪，boss</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 怪物抽象类</span></span><br><span class="line"><span class="comment"> *  nextMonster 下一个怪物</span></span><br><span class="line"><span class="comment"> *  setNextMonster 设置下一个怪物</span></span><br><span class="line"><span class="comment"> *  battle() 和玩家战斗</span></span><br><span class="line"><span class="comment"> *  battleSuccess() 战斗胜利</span></span><br><span class="line"><span class="comment"> *  battalFail() 战斗失败</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 普通怪</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NomalMonster</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> nextMonster = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setNextMonster</span> = <span class="keyword">function</span>(<span class="params">Monster</span>) &#123;</span><br><span class="line">        nextMonster = <span class="title class_">Monster</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battle</span> = <span class="keyword">function</span>(<span class="params">player</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> res = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>) % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (res) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">battleSuccess</span>();</span><br><span class="line">            nextMonster.<span class="title function_">battle</span>(player);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">battleFail</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battleSuccess</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;打败了普通怪.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battleFail</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;被普通怪打死, 请使用复活币&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 精英怪</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CreamMonster</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> nextMonster = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setNextMonster</span> = <span class="keyword">function</span>(<span class="params">Monster</span>) &#123;</span><br><span class="line">        nextMonster = <span class="title class_">Monster</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battle</span> = <span class="keyword">function</span>(<span class="params">player</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> res = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>) % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (res) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">battleSuccess</span>();</span><br><span class="line">            nextMonster.<span class="title function_">battle</span>(player);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">battleFail</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battleSuccess</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;打败了精英怪.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battleFail</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;被精英怪打死, 请使用复活币&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/** Boss怪</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BossMonster</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> nextMonster = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setNextMonster</span> = <span class="keyword">function</span>(<span class="params">Monster</span>) &#123;</span><br><span class="line">        nextMonster = <span class="title class_">Monster</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battle</span> = <span class="keyword">function</span>(<span class="params">player</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> res = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">10</span>) % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (res) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">battleSuccess</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">battleFail</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battleSuccess</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;打败了boss怪，通关成功！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">battleFail</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;被boss怪打死, 请使用复活币&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 玩家类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Player</span>(<span class="params"></span>) &#123;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> player = <span class="keyword">new</span> <span class="title class_">Player</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> nomalMonster = <span class="keyword">new</span> <span class="title class_">NomalMonster</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> creamMonster = <span class="keyword">new</span> <span class="title class_">CreamMonster</span>();</span><br><span class="line">nomalMonster.<span class="title function_">setNextMonster</span>(creamMonster);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> bossMonster = <span class="keyword">new</span> <span class="title class_">BossMonster</span>();</span><br><span class="line">creamMonster.<span class="title function_">setNextMonster</span>(bossMonster);</span><br><span class="line"> </span><br><span class="line">nomalMonster.<span class="title function_">battle</span>(player);</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a><b>策略模式</b></h3><br/>

<p><b>简要：</b></p>
<p>定义一组算法，将每个算法都封装起来，并且使他们之间可以互换</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 策略模式</span></span><br><span class="line"><span class="comment">// 定义一组算法，将每个算法都封装起来，并且使他们之间可以互换</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景： 五个人租房子，要么找五室一厅，要么三室一厅 + 二室一厅</span></span><br><span class="line"><span class="comment">// 角色：找房人</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 方案接口</span></span><br><span class="line"><span class="comment"> *  sayMethod()  输出方案</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 方案一  五室一厅</span></span><br><span class="line"><span class="comment"> *  sayMethod()  输出方案</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Method1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sayMethod</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;找一个五室一厅.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 方案二 三室一厅 + 二室一厅</span></span><br><span class="line"><span class="comment"> *  sayMethod()  输出方案</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Method2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sayMethod</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;找一个三室一厅和一个二室一厅&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 找房人</span></span><br><span class="line"><span class="comment"> *  method 方案</span></span><br><span class="line"><span class="comment"> *  findHouse() 找房子</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">findHousePeople</span>(<span class="params">method</span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">findHouse</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        method.<span class="title function_">sayMethod</span>();    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setMethod</span> = <span class="keyword">function</span>(<span class="params">newMethod</span>) &#123;</span><br><span class="line">        method = newMethod;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> method = <span class="keyword">new</span> <span class="title class_">Method1</span>();</span><br><span class="line"><span class="keyword">var</span> people = <span class="keyword">new</span> <span class="title function_">findHousePeople</span>(method);</span><br><span class="line">people.<span class="title function_">findHouse</span>();</span><br><span class="line"> </span><br><span class="line">method = <span class="keyword">new</span> <span class="title class_">Method2</span>();</span><br><span class="line">people.<span class="title function_">setMethod</span>(method);</span><br><span class="line">people.<span class="title function_">findHouse</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a><b>迭代器模式</b></h3><br/>

<p><b>简要：</b></p>
<p>给定一个遍历规则，不管其数据结构实现</p>
<p><b>代码示例：</B></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 迭代器模式</span></span><br><span class="line"><span class="comment">// 给定一个遍历规则，不管其数据结构实现</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：排队拿快递</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 学生构造函数</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, phone, expressId</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getPhone</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getExpressId</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> expressId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 快递点构造函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ExpressStation</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> index = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> students = [];</span><br><span class="line">    <span class="keyword">var</span> iterator = <span class="literal">null</span>;</span><br><span class="line">    iterator = &#123;</span><br><span class="line">        <span class="title function_">hasNext</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> index &lt; students.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">next</span>(<span class="params"></span>) &#123;</span><br><span class="line">            index ++;</span><br><span class="line">            <span class="keyword">return</span> students[index];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getIterator</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> iterator;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">addStudent</span> = <span class="keyword">function</span>(<span class="params">student</span>) &#123;</span><br><span class="line">        students.<span class="title function_">push</span>(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;15684175538&quot;</span>, <span class="string">&quot;5-68-9&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> s2 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="string">&quot;15806378470&quot;</span>, <span class="string">&quot;5-98-6&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> expressStation = <span class="keyword">new</span> <span class="title class_">ExpressStation</span>();</span><br><span class="line">expressStation.<span class="title function_">addStudent</span>(s1);</span><br><span class="line">expressStation.<span class="title function_">addStudent</span>(s2);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> iterator = expressStation.<span class="title function_">getIterator</span>();</span><br><span class="line"><span class="keyword">while</span> (iterator.<span class="title function_">hasNext</span>()) &#123;</span><br><span class="line">    <span class="keyword">var</span> student = iterator.<span class="title function_">next</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`快递员：&quot;下一位&quot;`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`学生：&quot;<span class="subst">$&#123;student.getExpressId()&#125;</span>&quot;`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`快递员：&quot;姓名，电话&quot;`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`学生: <span class="subst">$&#123;student.getName()&#125;</span>, <span class="subst">$&#123;student.getPhone()&#125;</span>`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a><b>观察者模式</b></h3><br/>

<p><b>简要：</b></p>
<p>定义对象间一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 观察者模式</span></span><br><span class="line"><span class="comment">// 定义对象间一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：订阅公众号</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 观察者接口 Observer</span></span><br><span class="line"><span class="comment"> *  update(String barName, String message) 收到消息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 被观察者接口 Observable</span></span><br><span class="line"><span class="comment"> *  addObserver(Observer ob) 添加观察者</span></span><br><span class="line"><span class="comment"> *  removeObserver(Observe ob) 删除观察者</span></span><br><span class="line"><span class="comment"> *  notifyObservers(String message) 通知所有观察者 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 微信用户构造函数</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WxUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">update</span> = <span class="keyword">function</span>(<span class="params">barName, message</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`公众号<span class="subst">$&#123;barName&#125;</span>发来消息：<span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 微信公众号构造函数</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WxBar</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> obs = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">addObserver</span> = <span class="keyword">function</span>(<span class="params">ob</span>) &#123;</span><br><span class="line">        obs.<span class="title function_">add</span>(ob);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">removeObserver</span> = <span class="keyword">function</span>(<span class="params">ob</span>) &#123;</span><br><span class="line">        obs.<span class="title function_">delete</span>(ob);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">notifyObservers</span> = <span class="keyword">function</span>(<span class="params">message</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> ob <span class="keyword">of</span> obs) &#123;</span><br><span class="line">            ob.<span class="title function_">update</span>(name, message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> user1 = <span class="keyword">new</span> <span class="title class_">WxUser</span>();</span><br><span class="line"><span class="keyword">var</span> user2 = <span class="keyword">new</span> <span class="title class_">WxUser</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> wxBar = <span class="keyword">new</span> <span class="title class_">WxBar</span>(<span class="string">&quot;党尼玛的公众号&quot;</span>);</span><br><span class="line">wxBar.<span class="title function_">addObserver</span>(user1);</span><br><span class="line">wxBar.<span class="title function_">addObserver</span>(user2);</span><br><span class="line">wxBar.<span class="title function_">notifyObservers</span>(<span class="string">&quot;这波超级帅！&quot;</span>);</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="发布订阅模式"><a href="#发布订阅模式" class="headerlink" title="发布订阅模式"></a><b>发布订阅模式</b></h3><br/>

<p><b>简要：</b></p>
<p>定义对象间一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。其UML图如下所示：</p>
<ul>
<li><p>Subject</p>
<p>  作为发布订阅模式中的发布者，其维护了一个所有订阅它的引用集合，并拥有添加、删除观察者以及通知所有观察者的方法</p>
</li>
<li><p>Observer</p>
<p>  作为发布订阅模式中的订阅者，为所有具体订阅者定义一个接口，在接到发布者的通知时来更新自己</p>
</li>
<li><p>实现步骤：</p>
<p>  首先要指定好谁充当发布者</p>
<p>  然后给发布者添加一个缓存列表，用于存放回调函数以便通知订阅者</p>
<p>  最后发布消息的时候，发布者会遍历这个缓存列表，依次触发里面存放的订阅者回调函</p>
</li>
</ul>
<p>数</p>
<br/>

<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 首先我们来实现发布者的基类，所有继承该发布者基类的子类都会成为发布者。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义发布者基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">observers</span> = []</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加订阅者</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">add</span>(<span class="params">observer</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">push</span>(obj)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移除订阅者</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">remove</span>(<span class="params">observer</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (item === observer) <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通知消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; msg </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">notify</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">observers</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.<span class="title function_">receive</span>(<span class="variable language_">this</span>, msg)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//然后我们来定义一个大V类，继承自Subject</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义大V类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BigV</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Subject</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>()</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取姓名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加粉丝</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type"></span>&#125; fans </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">addFans</span>(<span class="params">fans</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">add</span>(fans)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向粉丝推送消息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; msg </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">pushMsg</span>(<span class="params">msg</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">notify</span>(msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义粉丝类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义粉丝类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fans</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *接受推送消息方法</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="title function_">receive</span>(<span class="params">bigV, msg</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是粉丝<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>接收到了大V<span class="subst">$&#123;bigV.getName&#125;</span>推送的消息：<span class="subst">$&#123;msg&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bigV = <span class="keyword">new</span> <span class="title class_">BigV</span>(<span class="string">&#x27;Eason&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> fans1 = <span class="keyword">new</span> <span class="title class_">Fans</span>(<span class="string">&#x27;Jack&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> fans2 = <span class="keyword">new</span> <span class="title class_">Fans</span>(<span class="string">&#x27;Tom&#x27;</span>)</span><br><span class="line">bigV.<span class="title function_">addFans</span>(fans1)</span><br><span class="line">bigV.<span class="title function_">addFans</span>(fans2)</span><br><span class="line">bigV.<span class="title function_">pushMsg</span>(<span class="string">&#x27;祝大家新年快乐！&#x27;</span>)<span class="comment">// 输出： 我是粉丝Jack接收到了大VEason推送的消息：祝大家新年快乐！我是粉丝Tom接收到了大VEason推送的消息：祝大家新年快乐！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//优缺点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过上面的代码我们可以看出发布订阅模式的优点是解耦，作为发布者来说不用关心订阅方接收到推送消息之后究竟要做什么，而订阅方则不用关心发布方会何时发布消息。缺点就是创建订阅者本身就会消耗一部分时间和内存，有可能订阅消息到最终都未发生，并且过度使用发布订阅模式会导致程序难以跟踪和理解。</span></span><br></pre></td></tr></table></figure>

<br/>

<h3 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a><b>状态模式</b></h3><br/>

<p><b>简要:</b></p>
<p>当一个对象内在状态改变时允许其改变行为，这个对象看起来像改变了其类。简单讲就是一个对象有多个状态，且这个对象有几个行为，每个状态的这些行为不同</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 状态模式</span></span><br><span class="line"><span class="comment">// 当一个对象内在状态改变时允许其改变行为，这个对象看起来像改变了其类。</span></span><br><span class="line"><span class="comment">// 简单讲就是一个对象有多个状态，且这个对象有几个行为，</span></span><br><span class="line"><span class="comment">// 每个状态的这些行为不同</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：文件权限（普通用户只可读，一般管理员可读可写，超级管理员可读可写可删除）</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 状态接口 State</span></span><br><span class="line"><span class="comment"> *  read()  是否可读</span></span><br><span class="line"><span class="comment"> *  write() 是否可写</span></span><br><span class="line"><span class="comment"> *  delete() 是否可删除</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 普通用户状态构造函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NomalUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">read</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可读&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">write</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;不可写&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">delete</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;不可删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 一般管理员状态构造函数</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Admin</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">read</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可读&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">write</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可写&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">delete</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;不可删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 超级管理员构造函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SuperAdmin</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">read</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可读&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">write</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可写&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">delete</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 用户构造函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">User</span>(<span class="params">state</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setState</span> = <span class="keyword">function</span>(<span class="params">newState</span>) &#123;</span><br><span class="line">        state = newState;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">readFile</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        state.<span class="title function_">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">writeFile</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        state.<span class="title function_">write</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">deleteFile</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        state.<span class="title function_">delete</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="keyword">new</span> <span class="title class_">NomalUser</span>());</span><br><span class="line">user.<span class="title function_">readFile</span>();</span><br><span class="line">user.<span class="title function_">writeFile</span>();</span><br><span class="line"> </span><br><span class="line">user.<span class="title function_">setState</span>(<span class="keyword">new</span> <span class="title class_">SuperAdmin</span>());</span><br><span class="line">user.<span class="title function_">readFile</span>();</span><br><span class="line">user.<span class="title function_">writeFile</span>();</span><br><span class="line">user.<span class="title function_">deleteFile</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a><b>备忘录模式</b></h3><br/>

<p><b>简要：</b></p>
<p>三个角色，原发器，备忘录，备忘录守护者。原发器中暴露出两个接口，一个用于包装自己的状态成一个备忘录，另一个用于通过备忘录守护者恢复自身状态，备忘录中只保存原发器的状态，备忘录守护者中维持一个备忘录，可读可写。</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 备忘录模式</span></span><br><span class="line"><span class="comment">// 设置另外的对象作为备忘录对象，保存对象的状态</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：英雄联盟购买装备撤回</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 装备备忘录构造函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">EquipmentsMemento</span>(<span class="params">equipments</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setEquipments</span> = <span class="keyword">function</span>(<span class="params">newEquipments</span>) &#123;</span><br><span class="line">        equipments = newEquipments;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getEquipments</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> equipments;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 装备栏构造函数 </span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">EquipmentBar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> equipments = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">buyEquipment</span> = <span class="keyword">function</span>(<span class="params">equipment</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`购买了装备：<span class="subst">$&#123;equipment&#125;</span>`</span>);</span><br><span class="line">        equipments.<span class="title function_">push</span>(equipment);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">showEquipments</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;已购买装备: &quot;</span>, equipments.<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getEquipmentsMemento</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">EquipmentsMemento</span>([...equipments]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">recoverEquipments</span> = <span class="keyword">function</span>(<span class="params">equipmentCaretaker</span>) &#123;</span><br><span class="line">        equipments = equipmentCaretaker.<span class="title function_">getEquipmentsMemento</span>().<span class="title function_">getEquipments</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 装备状态管理者构造函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">EquipmentCaretaker</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> equipmentsMemento = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setEquipmentsMemento</span> = <span class="keyword">function</span>(<span class="params">newEquipmentsMemento</span>) &#123;</span><br><span class="line">        equipmentsMemento = newEquipmentsMemento;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getEquipmentsMemento</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> equipmentsMemento;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 初始化状态看守者</span></span><br><span class="line"><span class="keyword">var</span> equipmentCaretaker = <span class="keyword">new</span> <span class="title class_">EquipmentCaretaker</span>();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 初始化装备栏</span></span><br><span class="line"><span class="keyword">var</span> equipmentBar = <span class="keyword">new</span> <span class="title class_">EquipmentBar</span>();</span><br><span class="line"><span class="comment">// 购买装备</span></span><br><span class="line">equipmentBar.<span class="title function_">buyEquipment</span>(<span class="string">&quot;无尽之刃&quot;</span>);</span><br><span class="line">equipmentBar.<span class="title function_">buyEquipment</span>(<span class="string">&quot;狂战士胫甲&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 保存当前</span></span><br><span class="line">equipmentCaretaker.<span class="title function_">setEquipmentsMemento</span>(equipmentBar.<span class="title function_">getEquipmentsMemento</span>());</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 购买了一件不想要的装备</span></span><br><span class="line">equipmentBar.<span class="title function_">buyEquipment</span>(<span class="string">&quot;无用大棒&quot;</span>);</span><br><span class="line"> </span><br><span class="line">equipmentBar.<span class="title function_">showEquipments</span>();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 撤回</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;玩家买错了，撤回...&quot;</span>);</span><br><span class="line"> </span><br><span class="line">equipmentBar.<span class="title function_">recoverEquipments</span>(equipmentCaretaker);</span><br><span class="line">equipmentBar.<span class="title function_">showEquipments</span>();</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="解析器模式"><a href="#解析器模式" class="headerlink" title="解析器模式"></a><b>解析器模式</b></h3><br/>

<p><b>简要：</b></p>
<p>给定一门语言，定义它的文法的一种表示，并定义一个解释器，该解释器使用该表示来解释语言中的句子。</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解释器模式</span></span><br><span class="line"><span class="comment">// 给定一门语言，定义它的文法的一种表示，并定义一个解释器，该解释器使用该表示来解释语言中的句子。</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：sql 解释器  </span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** sql 内容构造函数</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Context</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> tableName = <span class="literal">null</span><span class="comment">/** string */</span>;</span><br><span class="line">    <span class="keyword">var</span> params = <span class="literal">null</span><span class="comment">/** object */</span>;</span><br><span class="line">    <span class="keyword">var</span> wheres = <span class="literal">null</span><span class="comment">/** object */</span>;</span><br><span class="line">    <span class="keyword">var</span> fields = <span class="literal">null</span><span class="comment">/** set */</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setTableName</span> = <span class="keyword">function</span>(<span class="params">newTableName</span>) &#123;</span><br><span class="line">        tableName = newTableName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getTableName</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> tableName;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setParams</span> = <span class="keyword">function</span>(<span class="params">newParams</span>) &#123;</span><br><span class="line">        params = newParams;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getParams</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> params;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setWheres</span> = <span class="keyword">function</span>(<span class="params">newWheres</span>) &#123;</span><br><span class="line">        wheres = newWheres;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getWheres</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> wheres;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setFields</span> = <span class="keyword">function</span>(<span class="params">newFields</span>) &#123;</span><br><span class="line">        fields = newFields;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">getFields</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> fields;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 解释器接口 SQLExpression</span></span><br><span class="line"><span class="comment"> *  string interpret(Context context)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** insert sql 解释器</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">InsertSQLExpression</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interpret</span> = <span class="keyword">function</span>(<span class="params">context</span>) &#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">var</span> params = context.<span class="title function_">getParams</span>();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 拼接 key</span></span><br><span class="line">        <span class="keyword">var</span> keys = <span class="string">&quot;(&quot;</span>;</span><br><span class="line">        <span class="keyword">var</span> allKey = <span class="title class_">Object</span>.<span class="title function_">getOwnPropertyNames</span>(params);</span><br><span class="line">        allKey.<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">            keys += key + <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        keys = keys.<span class="title function_">substring</span>(<span class="number">0</span>, keys.<span class="property">length</span> - <span class="number">1</span>);</span><br><span class="line">        keys += <span class="string">&quot;)&quot;</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 拼接 value</span></span><br><span class="line">        <span class="keyword">var</span> values = <span class="string">&quot;(&quot;</span>;</span><br><span class="line">        allKey.<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">            values += (<span class="keyword">typeof</span> params[key] === <span class="string">&#x27;string&#x27;</span> ? <span class="string">`&#x27;<span class="subst">$&#123;params[key]&#125;</span>&#x27;`</span> : params[key]) + <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">        values = values.<span class="title function_">substring</span>(<span class="number">0</span>, values.<span class="property">length</span> - <span class="number">1</span>);</span><br><span class="line">        values += <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">`insert into <span class="subst">$&#123;context.getTableName()&#125;</span> <span class="subst">$&#123;keys&#125;</span> values <span class="subst">$&#123;values&#125;</span>`</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> insertSQLExpression = <span class="keyword">new</span> <span class="title class_">InsertSQLExpression</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> context = <span class="keyword">new</span> <span class="title class_">Context</span>();</span><br><span class="line">context.<span class="title function_">setTableName</span>(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">context.<span class="title function_">setParams</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;dcw&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> sql = insertSQLExpression.<span class="title function_">interpret</span>(context);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sql)</span><br></pre></td></tr></table></figure>

<br/>

<h3 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a><b>访问者模式</b></h3><br/>

<p><b>简要：</b></p>
<p>见人说人话，见鬼说鬼话</p>
<p><b>代码示例：</b></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问者模式</span></span><br><span class="line"><span class="comment">// 见人说人话，见鬼说鬼话</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 场景：买衣服时服务员的引导，男生引导到男生区，女生引导到女生区</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 服务员抽象类 Waiter</span></span><br><span class="line"><span class="comment"> *  accept(Customer customer)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 以纯商场服务员 extends Waiter</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">YiChunWaiter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">accept</span> = <span class="keyword">function</span>(<span class="params">customer</span>) &#123;</span><br><span class="line">        customer.<span class="title function_">visit</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 服务女士</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">serverWoman</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;带领女士到女士服装区.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 服务男士</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">serveMan</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;带领男士到男士服装区.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 顾客接口（访问者）</span></span><br><span class="line"><span class="comment"> *  visit(MarketWaiter waiter)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 女士顾客</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WomanCustomer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">visit</span> = <span class="keyword">function</span>(<span class="params">waiter</span>) &#123;</span><br><span class="line">        waiter.<span class="title function_">serverWoman</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/** 男士顾客</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ManCustomer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">visit</span> = <span class="keyword">function</span>(<span class="params">waiter</span>) &#123;</span><br><span class="line">        waiter.<span class="title function_">serveMan</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> yichunWaiter = <span class="keyword">new</span> <span class="title class_">YiChunWaiter</span>();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> womanCustomer = <span class="keyword">new</span> <span class="title class_">WomanCustomer</span>();</span><br><span class="line"><span class="keyword">var</span> manCustomer = <span class="keyword">new</span> <span class="title class_">ManCustomer</span>();</span><br><span class="line"> </span><br><span class="line">yichunWaiter.<span class="title function_">accept</span>(womanCustomer);</span><br><span class="line">yichunWaiter.<span class="title function_">accept</span>(manCustomer);</span><br></pre></td></tr></table></figure>

<br/>

<h2 id="四、代码重构"><a href="#四、代码重构" class="headerlink" title="四、代码重构"></a><b>四、代码重构</b></h2><br/>

<h3 id="1、什么是重构"><a href="#1、什么是重构" class="headerlink" title="1、什么是重构"></a><b>1、什么是重构</b></h3><br/>

<blockquote>
<p>首先，<b style='color:yellow'>重构不是重写。</b></p>
</blockquote>
<br/>

<p>  重构大概的意思是在不影响项目的功能使用前提下，使用一系列的重构方式，改变项目的内部结构。提高项目内部的可读性，可维护性。无论是什么项目，都有一个从简单到复杂的一个迭代过程。在这个过程里面，在不影响项目的使用情况下，需要不断的对代码进行优化，保持或者增加代码的可读性，可维护性。</p>
<p>  这样一来，就可以避免在团队协作开发上需要大量的沟通，交流。才能加入项目的开发中。</p>
<br/>

<h3 id="2、为什么重构"><a href="#2、为什么重构" class="headerlink" title="2、为什么重构"></a><b>2、为什么重构</b></h3><br/>

<blockquote>
<p>衣服脏了就洗，破了就补，不合穿就扔。</p>
</blockquote>
<br/>

<p>  随着业务需求的不断增加，变更，舍弃，项目的代码也难免会出现瑕疵，这就会影响代码的可读性，可维护性，甚至影响项目的性能。而重构的目的，就是为了解决这些瑕疵，保证代码质量和性能。但是前提是不能影响项目的使用。</p>
<p>  <b>至于重构的原因，大概有以下几点：</b></p>
<ul>
<li>函数逻辑结构混乱，或因为没注释原因，连原代码写作者都很难理清当中的逻辑。</li>
<li>函数无扩展性可言，遇到新的变化，不能灵活的处理。</li>
<li>因为对象强耦合或者业务逻辑的原因，导致业务逻辑的代码巨大，维护的时候排查困难。</li>
<li>重复代码太多，没有复用性。</li>
<li>随着技术的发展，代码可能也需要使用新特性进行修改。</li>
<li>随着学习的深入，对于以前的代码，是否有着更好的一个解决方案。</li>
<li>因为代码的写法，虽然功能正常使用，但是性能消耗较多，需要换方案进行优化</li>
</ul>
<br/>

<h3 id="3、重构要注意什么"><a href="#3、重构要注意什么" class="headerlink" title="3、重构要注意什么"></a><b>3、重构要注意什么</b></h3><br/>

<blockquote>
<p>在合适的时间，在合适的事情</p>
</blockquote>
<br/>

<p>  重构可以说是贯穿整一个项目的开发和维护周期，可以当作重构就是开发的一部分。通俗讲，在开发的任何时候，只要看到代码有别扭，激发了强迫症，就可以考虑重构了。只是，重构之前先参考下面几点：</p>
<ul>
<li>首先，重构是需要花时间去做的一件事。花的时间可能比之前的开发时间还要多。</li>
<li>其次，重构是为了把代码优化，前提是不能影响项目的使用。</li>
<li>最后，重构的难度大小不一，可能只是稍微改动，可能难度比之前开发还要难。</li>
</ul>
<p>  基于上面的几点，需要大家去评估是否要进行重构。评估的指标，可以参考下面几点</p>
<ul>
<li><span style='color:red'>数量: </span>需要重构的代码是否过多。</li>
<li><span style='color:red'>质量: </span>可读性，可维护性，代码逻辑复杂度，等问题，对代码的质量影响是否到了一个难以忍受的地步。</li>
<li><span style='color:red'>时间: </span>是否有充裕的时间进行重构和测试。</li>
<li><span style='color:red'>效果: </span>如果重构了代码，得到哪些改善，比如代码质量提高了，性能提升了，更好的支持后续功能等。</li>
</ul>
<br/>

<h2 id="五、附录：设计模式图示"><a href="#五、附录：设计模式图示" class="headerlink" title="五、附录：设计模式图示"></a><b>五、附录：设计模式图示</b></h2><br/>

<p><b>图一</b></p>
<br/>

<p><img src="/img/01.jpg"><br><img src="/img/02.jpg"><br><img src="/img/03.jpg"><br><img src="/img/04.jpg"></p>
<br/>

<p><b>图二</b></p>
<br/>

<p><img src="/img/10.png"></p>
<br/>

<p><b>图三</b></p>
<br/>

<p><img src="/img/11.png"></p>
<br/>

<p><b>图四</b></p>
<br/>

<p><img src="/img/12.png"></p>
<br/>

<p><b>图五</b></p>
<br/>

<p><img src="/img/14.jpg"></p>
<br/>

<h2 id="六、参考文档来源"><a href="#六、参考文档来源" class="headerlink" title="六、参考文档来源"></a><b>六、参考文档来源</b></h2><br/>

<p><a target="_blank" rel="noopener" href="https://github.com/wanghuan19961020/design-pattern-cart">基于js设计模式的购物车案例</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/14glwu/FEInterviewBox/tree/master/JS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">14glwu&#x2F;FEInterviewBox&#x2F;JS设计模式</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903503266054157">JavaScript设计模式&#x2F;考拉海购前端团队</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903607452581896">JavaScript 中常见设计模式整理</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903846523699214#heading-2">js实现23种设计模式</a></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Jun Shi</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://zmf-6.github.io/2023/04/17/she-ji-mo-shi/she-ji-mo-shi/">https://zmf-6.github.io/2023/04/17/she-ji-mo-shi/she-ji-mo-shi/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Jun Shi</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/js/">
                                    <span class="chip bg-color">js</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/05/23/yi-dong-duan-gua-pei/yi-dong-duan-gua-pei/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/3.jpg" class="responsive-img" alt="移动端适配">
                        
                        <span class="card-title">移动端适配</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-05-23
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" class="post-category">
                                    移动端
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">
                        <span class="chip bg-color">移动端</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/03/02/neovis.js-neo4j-visualization/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="Neovis.js可视化Neo4j数据库">
                        
                        <span class="card-title">Neovis.js可视化Neo4j数据库</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-03-02
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Jun Shi
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Neovis-js/">
                        <span class="chip bg-color">Neovis.js</span>
                    </a>
                    
                    <a href="/tags/Neo4j/">
                        <span class="chip bg-color">Neo4j</span>
                    </a>
                    
                    <a href="/tags/%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93/">
                        <span class="chip bg-color">图数据库</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 顶级军师<br />'
            + '文章作者: Jun Shi<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2024</span>
            
            <a href="/about" target="_blank">Jun Shi</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
                <span id="translate">|&nbsp;繁/简：</span><a id="translateLink" href="javascript:translatePage();">繁</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/zmf-6" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:3073799663@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=3073799663" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 3073799663" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        <script type="text/javascript" src="/js/tw_cn.js"></script>
        <script type="text/javascript">
          var defaultEncoding = 2; //网站编写字体是否繁体，1-繁体，2-简体
          var translateDelay = 0; //延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0
          var cookieDomain = "https://zmf-6.github.io"; //Cookie地址, 一定要设定, 通常为你的网址
          var msgToTraditionalChinese = "繁"; //此处可以更改为你想要显示的文字
          var msgToSimplifiedChinese = "简"; //同上，但两处均不建议更改
          var translateButtonId = "translateLink"; //默认互换id
          translateInitilization();
        </script>
    
    
    
        
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/sakura.js"><\/script>');
            }
        </script>
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
        <div style="position:fixed;bottom:125px;right:16px;cursor: pointer;">
            <a title="兔小巢" target="_blank" rel="noopener" href="https://support.qq.com/products/618106"><i class="fa fa-comments fa-3x"  aria-hidden="true"></i></a>
        </div>
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
