(function(t){function e(e){for(var i,r,s=e[0],c=e[1],u=e[2],l=0,f=[];l<s.length;l++)r=s[l],a[r]&&f.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);p&&p(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},o=[];function r(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"5953bc81"}[t]+".js"}function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise(function(e,i){n=a[t]=[e,i]});e.push(n[2]=i);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=r(t),o=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=a[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+i+": "+o+")");r.type=i,r.request=o,n[1](r)}a[t]=void 0}};var u=setTimeout(function(){o({type:"timeout",target:c})},12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var p=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"07ee":function(t,e,n){},"08df":function(t,e,n){},"1c7a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!0,visible:t.dialogVisible,"before-close":t.handleClose,title:"附件预览",top:"25px",width:"95%","custom-class":"layout-preview-attachment"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("span",[n("div",{staticClass:"layout-img-preview",style:{height:t.h+"px"}},[n("a",{directives:[{name:"show",rawName:"v-show",value:t.index>0,expression:"index > 0"}],staticClass:"i-pre",attrs:{href:"javascript:;",title:"pre"},on:{click:function(e){t.goPre()}}},[n("i",{staticClass:"alifont af-zuojiantou"})]),n("a",{directives:[{name:"show",rawName:"v-show",value:t.attachments&&t.index<t.attachments.length-1,expression:"attachments && index < (attachments.length -1)"}],staticClass:"i-next",attrs:{href:"javascript:;",title:"next"},on:{click:function(e){t.goNext()}}},[n("i",{staticClass:"alifont af-iconfontjiantou4"})]),t.showImageApp(t.fileType)?n("div",{staticClass:"i-operater"},[n("i",{staticClass:"i-operater-icon alifont af-clouddownload",attrs:{id:"download",alt:"下载",title:"下载"},on:{click:function(e){t.downLoad()}}}),n("i",{staticClass:"i-operater-icon alifont af-rotateleft_b",attrs:{alt:"旋转",title:"旋转"},on:{click:function(e){t.rotate()}}}),n("p",{staticClass:"i-title"},[t._v(t._s(t.curItem.name))])]):t._e(),n("div",{staticClass:"i-img-view-wrap",style:{height:t.h-60+"px",width:"100%"}},[t.showImageApp(t.fileType)?n("img",{staticClass:"i-img-view",style:{width:t.imgW,height:t.imgH,transform:"rotateZ("+t.rotateVal+"deg)"},attrs:{src:t.curItem.url}}):t._e(),t.showOfficeApp(t.fileType)?n("iframe",{attrs:{src:"https://view.officeapps.live.com/op/view.aspx?src="+t.curItem.url,height:t.h+"px",width:"100%",frameborder:"1"}}):t._e(),"pdf"===t.fileType?n("div",{style:{height:t.h+"px"},attrs:{id:"example1"}}):t._e()])])])])],1)},a=[],o=(n("a481"),n("ac6a"),n("f499")),r=n.n(o),s=n("795b"),c=n.n(s),u=(n("cadf"),n("551c"),n("097d"),n("25c3")),l=n.n(u),p={data:function(){return{curItem:{},index:0,dialogVisible:!1,h:0,fileType:"pdf",rotateVal:0,imgH:"auto",imgW:"auto",attachments:[]}},mounted:function(){this.h=window.innerHeight-116},methods:{openPDF:function(t){var e=this.fileType=this.getType(this.curItem);if("pdf"!==e)return!1;var n={height:this.h+"px",pdfOpenParams:{view:"FitV",page:"0"},name:"mans",fallbackLink:"<p>您的浏览器暂不支持此pdf，请下载最新的浏览器</p>"};this.$timeout(600).then(function(){l.a.embed(t.url,"#example1",n)})},goPre:function(){var t=this.index;t>0&&(this.index=t-=1,this.curItem=this.attachments[t],this.openPDF(this.curItem)),console.log("cur",this.curItem)},goNext:function(){var t=this.attachments.length,e=this.index;e<t-1&&(this.index=e+=1,this.curItem=this.attachments[e],this.openPDF(this.curItem)),console.log("cur",this.curItem)},rotate:function(){var t=this,e=this.rotateVal-=90,n=e%180===0,i=new c.a(function(e,n){var i=new Image;i.src=t.curItem.url,i.onload=function(){var t=i.width,n=i.height,a=t>n;e(a)}});i.then(function(e){e?n?(t.imgW="auto",t.imgH="auto"):(t.imgW=t.h-65+"px",t.imgH="auto"):n?(t.imgW=t.h-65+"px",t.imgH="auto"):(t.imgW="auto",t.imgH="auto")})},downLoad:function(){window.open(this.curItem.url,"_blank")},showOfficeApp:function(t){var e=["doc","docx","xls","xlsx"],n=!1;for(var i in e)if(t===e[i]){n=!0;break}return n},showImageApp:function(t){var e=["png","jpg","jpeg","gif"],n=!1;for(var i in e)if(t===e[i]){n=!0;break}return n},getType:function(t){var e=["doc","docx","xls","xlsx","pdf","png","jpg","jpeg","gif"],n="";for(var i in e)if(-1!==t.url.indexOf("."+e[i])){n=e[i];break}return n},handleOpen:function(t,e,n){return console.log("attachments",r()(e)),e.forEach(function(t){t.url=t.url.replace("//upload","/upload")}),t.url=t.url.replace("//upload","/upload"),this.attachments=e,this.index=n,this.fileType=this.getType(t),""===this.fileType?(this.$message.error("暂不支持此格式的预览,请联系系统管理员吴兴省！"),!1):(this.dialogVisible=!0,"pdf"===this.fileType?(this.curItem=t,this.openPDF(this.curItem),!1):void(this.showOfficeApp(this.fileType)?this.curItem=t:this.showImageApp(this.fileType)&&(this.curItem=t)))},handleClose:function(t){t()}}},f=p,d=(n("57a7"),n("2877")),h=Object(d["a"])(f,i,a,!1,null,null,null);h.options.__file="previewAttachment.vue";e["default"]=h.exports},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),a=n("5c96"),o=n.n(a),r=(n("0fae"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("p",{staticStyle:{color:"red"}},[t._v("点击下面文件名预览，目前支持['doc', 'docx', 'xls', 'xlsx', 'pdf', 'png', 'jpg', 'jpeg', 'gif']的文件")]),n("router-view")],1)}),s=[],c=(n("7c55"),n("2877")),u={},l=Object(c["a"])(u,r,s,!1,null,null,null);l.options.__file="App.vue";var p=l.exports,f=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._l(t.attachments,function(e,i){return n("a",{key:i,staticClass:"previewAt",attrs:{target:"_blank"},on:{click:function(n){t.preview(e,t.attachments,i)}}},[t._v(t._s(e.name||"查看"))])}),n("c-preview",{ref:"preview"})],2)},h=[],m={name:"home",data:function(){return{attachments:[{name:"12",url:"https://github.com/zmf-6/cdn/blob/master/%E6%96%B0%E5%BB%BA%20DOC%20%E6%96%87%E6%A1%A3.doc",status:"done",id:16063,size:28672},{name:"5",url:"http://test.com/api//upload/201901/5_20190104080109153.jpg",status:"done",id:16064,size:56944},{name:"1",url:"http://test.com/api//upload/201901/1_20190104080109279.jpg",status:"done",id:16065,size:72375},{name:"excel",url:"http://test.com/api//upload/201901/excel_2019010408010951.xlsx",status:"done",id:16066,size:47383},{name:"未命名",url:"http://test.com/api//upload/201901/未命名_20190104080109558.docx",status:"done",id:16067,size:9887},{name:"pdf",url:"http://test.com/api//upload/201901/pdf_20190104080109633.pdf",status:"done",id:16068,size:25051}]}},components:{"c-preview":n("1c7a").default},methods:{preview:function(t,e,n){this.$refs["preview"].handleOpen(t,e,n)}}},v=m,g=(n("e2ef"),Object(c["a"])(v,d,h,!1,null,"da374cf8",null));g.options.__file="Home.vue";var w=g.exports;i["default"].use(f["a"]);var x=new f["a"]({routes:[{path:"/",name:"home",component:w},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),b=n("2f62");i["default"].use(b["a"]);var y=new b["a"].Store({state:{},mutations:{},actions:{}}),_=n("795b"),j=n.n(_),I=function(t){return new j.a(function(e,n){window.setTimeout(function(){e()},t)})};i["default"].prototype.$timeout=I,i["default"].use(o.a),i["default"].config.productionTip=!1,new i["default"]({router:x,store:y,render:function(t){return t(p)}}).$mount("#app")},"57a7":function(t,e,n){"use strict";var i=n("08df"),a=n.n(i);a.a},"5c48":function(t,e,n){},"7c55":function(t,e,n){"use strict";var i=n("5c48"),a=n.n(i);a.a},e2ef:function(t,e,n){"use strict";var i=n("07ee"),a=n.n(i);a.a}});
//# sourceMappingURL=app.7ca3e71c.js.map